<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8 Community ecology analyses with vegan | Bio 373L Survival Guide</title>
  <meta name="description" content="Lab Manual for Field Ecology (Bio 373L) at UT Austin." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="8 Community ecology analyses with vegan | Bio 373L Survival Guide" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Lab Manual for Field Ecology (Bio 373L) at UT Austin." />
  <meta name="github-repo" content="Christopher-Peterson/Bio373L-Book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8 Community ecology analyses with vegan | Bio 373L Survival Guide" />
  
  <meta name="twitter:description" content="Lab Manual for Field Ecology (Bio 373L) at UT Austin." />
  

<meta name="author" content="Christopher R. Peterson" />


<meta name="date" content="2022-01-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-analysis-tutorial.html"/>
<link rel="next" href="tidyr-tutorial.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Bio 373L Survival Guide</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="part"><span><b>I Writing Lab Reports</b></span></li>
<li class="chapter" data-level="1" data-path="structure.html"><a href="structure.html"><i class="fa fa-check"></i><b>1</b> The Structure of a Scientific Manuscript</a>
<ul>
<li class="chapter" data-level="1.1" data-path="structure.html"><a href="structure.html#full-manuscripts"><i class="fa fa-check"></i><b>1.1</b> Full Manuscripts</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="structure.html"><a href="structure.html#title"><i class="fa fa-check"></i><b>1.1.1</b> Title</a></li>
<li class="chapter" data-level="1.1.2" data-path="structure.html"><a href="structure.html#abstract-key"><i class="fa fa-check"></i><b>1.1.2</b> Abstract (key)</a></li>
<li class="chapter" data-level="1.1.3" data-path="structure.html"><a href="structure.html#introduction"><i class="fa fa-check"></i><b>1.1.3</b> Introduction</a></li>
<li class="chapter" data-level="1.1.4" data-path="structure.html"><a href="structure.html#methods"><i class="fa fa-check"></i><b>1.1.4</b> Methods</a></li>
<li class="chapter" data-level="1.1.5" data-path="structure.html"><a href="structure.html#results"><i class="fa fa-check"></i><b>1.1.5</b> Results</a></li>
<li class="chapter" data-level="1.1.6" data-path="structure.html"><a href="structure.html#discussion"><i class="fa fa-check"></i><b>1.1.6</b> Discussion</a></li>
<li class="chapter" data-level="1.1.7" data-path="structure.html"><a href="structure.html#literature"><i class="fa fa-check"></i><b>1.1.7</b> Literature</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="structure.html"><a href="structure.html#preliminary-manuscripts"><i class="fa fa-check"></i><b>1.2</b> Preliminary Manuscripts</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="structure.html"><a href="structure.html#the-five-paragraphs"><i class="fa fa-check"></i><b>1.2.1</b> The Five Paragraphs</a></li>
<li class="chapter" data-level="1.2.2" data-path="structure.html"><a href="structure.html#list-of-methods-analyses"><i class="fa fa-check"></i><b>1.2.2</b> List of Methods &amp; Analyses</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="structure.html"><a href="structure.html#figures-and-tables"><i class="fa fa-check"></i><b>1.3</b> Figures and Tables</a></li>
<li class="chapter" data-level="1.4" data-path="structure.html"><a href="structure.html#citationsreferences"><i class="fa fa-check"></i><b>1.4</b> Citations/References</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="style.html"><a href="style.html"><i class="fa fa-check"></i><b>2</b> Content and Style of an Effective Manuscript</a>
<ul>
<li class="chapter" data-level="2.1" data-path="style.html"><a href="style.html#be-concise"><i class="fa fa-check"></i><b>2.1</b> Be Concise</a></li>
<li class="chapter" data-level="2.2" data-path="style.html"><a href="style.html#sentence-structure"><i class="fa fa-check"></i><b>2.2</b> Sentence Structure</a></li>
<li class="chapter" data-level="2.3" data-path="style.html"><a href="style.html#passive-voice"><i class="fa fa-check"></i><b>2.3</b> Passive Voice</a></li>
<li class="chapter" data-level="2.4" data-path="style.html"><a href="style.html#style_lit"><i class="fa fa-check"></i><b>2.4</b> Using the literature in your paper (This is a common source of mistakes)</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="style.html"><a href="style.html#be-specific-and-concice-with-your-citations"><i class="fa fa-check"></i><b>2.4.1</b> Be specific and concice with your citations</a></li>
<li class="chapter" data-level="2.4.2" data-path="style.html"><a href="style.html#do-not-include-direct-quotes-from-the-literature"><i class="fa fa-check"></i><b>2.4.2</b> Do not include direct quotes from the literature</a></li>
<li class="chapter" data-level="2.4.3" data-path="style.html"><a href="style.html#where-citations-belong"><i class="fa fa-check"></i><b>2.4.3</b> Where citations belong</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="style.html"><a href="style.html#word-choice"><i class="fa fa-check"></i><b>2.5</b> Word Choice</a></li>
<li class="chapter" data-level="2.6" data-path="style.html"><a href="style.html#scientific-and-common-names"><i class="fa fa-check"></i><b>2.6</b> Scientific and Common Names</a></li>
<li class="chapter" data-level="2.7" data-path="style.html"><a href="style.html#other-grammar"><i class="fa fa-check"></i><b>2.7</b> Other Grammar</a></li>
<li class="chapter" data-level="2.8" data-path="style.html"><a href="style.html#commonly-confused-definitions"><i class="fa fa-check"></i><b>2.8</b> Commonly Confused Definitions</a></li>
<li class="chapter" data-level="2.9" data-path="style.html"><a href="style.html#significant-digits"><i class="fa fa-check"></i><b>2.9</b> Significant Digits</a></li>
<li class="chapter" data-level="2.10" data-path="style.html"><a href="style.html#tenses"><i class="fa fa-check"></i><b>2.10</b> Tenses</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="figures.html"><a href="figures.html"><i class="fa fa-check"></i><b>3</b> Figures and Tables</a>
<ul>
<li class="chapter" data-level="3.1" data-path="figures.html"><a href="figures.html#captions"><i class="fa fa-check"></i><b>3.1</b> Captions</a></li>
<li class="chapter" data-level="3.2" data-path="figures.html"><a href="figures.html#figures-1"><i class="fa fa-check"></i><b>3.2</b> Figures</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="figures.html"><a href="figures.html#specific-figure-guidelines"><i class="fa fa-check"></i><b>3.2.1</b> Specific Figure Guidelines</a></li>
<li class="chapter" data-level="3.2.2" data-path="figures.html"><a href="figures.html#be-concise-1"><i class="fa fa-check"></i><b>3.2.2</b> Be Concise</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="figures.html"><a href="figures.html#some-example-figures"><i class="fa fa-check"></i><b>3.3</b> Some Example Figures</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="figures.html"><a href="figures.html#general-formatting"><i class="fa fa-check"></i><b>3.3.1</b> General Formatting</a></li>
<li class="chapter" data-level="3.3.2" data-path="figures.html"><a href="figures.html#continuous-response-categorical-predictors"><i class="fa fa-check"></i><b>3.3.2</b> Continuous response, categorical predictors</a></li>
<li class="chapter" data-level="3.3.3" data-path="figures.html"><a href="figures.html#categorical-count-or-frequency-responses"><i class="fa fa-check"></i><b>3.3.3</b> Categorical, count, or frequency responses</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="figures.html"><a href="figures.html#tables"><i class="fa fa-check"></i><b>3.4</b> Tables</a></li>
</ul></li>
<li class="part"><span><b>II Data Analysis in R</b></span></li>
<li class="chapter" data-level="4" data-path="working-with-r-and-rstudio.html"><a href="working-with-r-and-rstudio.html"><i class="fa fa-check"></i><b>4</b> Working with R and RStudio</a>
<ul>
<li class="chapter" data-level="4.1" data-path="working-with-r-and-rstudio.html"><a href="working-with-r-and-rstudio.html#introduction-to-rstudio"><i class="fa fa-check"></i><b>4.1</b> Introduction to RStudio</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="working-with-r-and-rstudio.html"><a href="working-with-r-and-rstudio.html#rstudio-projects"><i class="fa fa-check"></i><b>4.1.1</b> RStudio Projects</a></li>
<li class="chapter" data-level="4.1.2" data-path="working-with-r-and-rstudio.html"><a href="working-with-r-and-rstudio.html#customizing-rstudio"><i class="fa fa-check"></i><b>4.1.2</b> Customizing RStudio</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="working-with-r-and-rstudio.html"><a href="working-with-r-and-rstudio.html#r-basics"><i class="fa fa-check"></i><b>4.2</b> R basics</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="working-with-r-and-rstudio.html"><a href="working-with-r-and-rstudio.html#statements-vectors"><i class="fa fa-check"></i><b>4.2.1</b> Statements &amp; vectors</a></li>
<li class="chapter" data-level="4.2.2" data-path="working-with-r-and-rstudio.html"><a href="working-with-r-and-rstudio.html#variables"><i class="fa fa-check"></i><b>4.2.2</b> Variables</a></li>
<li class="chapter" data-level="4.2.3" data-path="working-with-r-and-rstudio.html"><a href="working-with-r-and-rstudio.html#reading-working-with-data-frames"><i class="fa fa-check"></i><b>4.2.3</b> Reading &amp; working with data frames</a></li>
<li class="chapter" data-level="4.2.4" data-path="working-with-r-and-rstudio.html"><a href="working-with-r-and-rstudio.html#functions"><i class="fa fa-check"></i><b>4.2.4</b> Functions</a></li>
<li class="chapter" data-level="4.2.5" data-path="working-with-r-and-rstudio.html"><a href="working-with-r-and-rstudio.html#getting-help"><i class="fa fa-check"></i><b>4.2.5</b> Getting Help</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html"><i class="fa fa-check"></i><b>5</b> Making graphs in R with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="5.1" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#components-of-a-plot"><i class="fa fa-check"></i><b>5.1</b> Components of a plot</a></li>
<li class="chapter" data-level="5.2" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#aesthetics-and-scales"><i class="fa fa-check"></i><b>5.2</b> Aesthetics and scales</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#color"><i class="fa fa-check"></i><b>5.2.1</b> Color</a></li>
<li class="chapter" data-level="5.2.2" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#shape"><i class="fa fa-check"></i><b>5.2.2</b> Shape</a></li>
<li class="chapter" data-level="5.2.3" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#size"><i class="fa fa-check"></i><b>5.2.3</b> Size</a></li>
<li class="chapter" data-level="5.2.4" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#fixed-aesthetics"><i class="fa fa-check"></i><b>5.2.4</b> Fixed aesthetics</a></li>
<li class="chapter" data-level="5.2.5" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#combining-aesthetics"><i class="fa fa-check"></i><b>5.2.5</b> Combining aesthetics</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#geometry"><i class="fa fa-check"></i><b>5.3</b> Geometry</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#continuous-x-no-y"><i class="fa fa-check"></i><b>5.3.1</b> Continuous X, no Y</a></li>
<li class="chapter" data-level="5.3.2" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#ggp_discx_conty"><i class="fa fa-check"></i><b>5.3.2</b> Discrete X, continuous Y</a></li>
<li class="chapter" data-level="5.3.3" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#continuous-x-and-y"><i class="fa fa-check"></i><b>5.3.3</b> Continuous X and Y</a></li>
<li class="chapter" data-level="5.3.4" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#time-series-data"><i class="fa fa-check"></i><b>5.3.4</b> Time series data</a></li>
<li class="chapter" data-level="5.3.5" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#discrete-x-and-y"><i class="fa fa-check"></i><b>5.3.5</b> Discrete X and Y</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#facets"><i class="fa fa-check"></i><b>5.4</b> Facets</a></li>
<li class="chapter" data-level="5.5" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#changing-the-theme-axis-titles-other-visual-elements"><i class="fa fa-check"></i><b>5.5</b> Changing the theme, axis titles, &amp; other visual elements</a></li>
<li class="chapter" data-level="5.6" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#more-references"><i class="fa fa-check"></i><b>5.6</b> More references</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="dplyr-tutorial.html"><a href="dplyr-tutorial.html"><i class="fa fa-check"></i><b>6</b> Data manipulation with <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="6.1" data-path="dplyr-tutorial.html"><a href="dplyr-tutorial.html#the-pipe"><i class="fa fa-check"></i><b>6.1</b> The Pipe (%&gt;%)</a></li>
<li class="chapter" data-level="6.2" data-path="dplyr-tutorial.html"><a href="dplyr-tutorial.html#addingmodifying-columns-mutate"><i class="fa fa-check"></i><b>6.2</b> Adding/modifying columns (mutate)</a></li>
<li class="chapter" data-level="6.3" data-path="dplyr-tutorial.html"><a href="dplyr-tutorial.html#subsetting-by-row-filter"><i class="fa fa-check"></i><b>6.3</b> Subsetting by row (filter)</a></li>
<li class="chapter" data-level="6.4" data-path="dplyr-tutorial.html"><a href="dplyr-tutorial.html#subsetting-by-column-select"><i class="fa fa-check"></i><b>6.4</b> Subsetting by column (select)</a></li>
<li class="chapter" data-level="6.5" data-path="dplyr-tutorial.html"><a href="dplyr-tutorial.html#sorting-by-columns-arrange"><i class="fa fa-check"></i><b>6.5</b> Sorting by columns (arrange)</a></li>
<li class="chapter" data-level="6.6" data-path="dplyr-tutorial.html"><a href="dplyr-tutorial.html#summarizing-data"><i class="fa fa-check"></i><b>6.6</b> Summarizing data</a></li>
<li class="chapter" data-level="6.7" data-path="dplyr-tutorial.html"><a href="dplyr-tutorial.html#group-operations"><i class="fa fa-check"></i><b>6.7</b> Group Operations</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="r-analysis-tutorial.html"><a href="r-analysis-tutorial.html"><i class="fa fa-check"></i><b>7</b> Performing some useful analyses in R</a>
<ul>
<li class="chapter" data-level="7.1" data-path="r-analysis-tutorial.html"><a href="r-analysis-tutorial.html#a-note-on-factors"><i class="fa fa-check"></i><b>7.1</b> A note on factors</a></li>
<li class="chapter" data-level="7.2" data-path="r-analysis-tutorial.html"><a href="r-analysis-tutorial.html#comparing-categorical-frequencies-contingency-tables-related-analyses"><i class="fa fa-check"></i><b>7.2</b> Comparing categorical frequencies (Contingency Tables &amp; related analyses)</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="r-analysis-tutorial.html"><a href="r-analysis-tutorial.html#contingency-tables"><i class="fa fa-check"></i><b>7.2.1</b> Contingency Tables</a></li>
<li class="chapter" data-level="7.2.2" data-path="r-analysis-tutorial.html"><a href="r-analysis-tutorial.html#chi-squared-fishers-exact-tests"><i class="fa fa-check"></i><b>7.2.2</b> Chi-squared &amp; Fisher’s Exact Tests</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="r-analysis-tutorial.html"><a href="r-analysis-tutorial.html#linear-models-regression-anova-and-t-tests"><i class="fa fa-check"></i><b>7.3</b> Linear Models: Regression, ANOVA, and t-tests</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="r-analysis-tutorial.html"><a href="r-analysis-tutorial.html#regression"><i class="fa fa-check"></i><b>7.3.1</b> Regression</a></li>
<li class="chapter" data-level="7.3.2" data-path="r-analysis-tutorial.html"><a href="r-analysis-tutorial.html#anova"><i class="fa fa-check"></i><b>7.3.2</b> ANOVA</a></li>
<li class="chapter" data-level="7.3.3" data-path="r-analysis-tutorial.html"><a href="r-analysis-tutorial.html#comparing-two-means-t-tests"><i class="fa fa-check"></i><b>7.3.3</b> Comparing two means (t-tests)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="vegan-tutorial.html"><a href="vegan-tutorial.html"><i class="fa fa-check"></i><b>8</b> Community ecology analyses with <code>vegan</code></a>
<ul>
<li class="chapter" data-level="8.1" data-path="vegan-tutorial.html"><a href="vegan-tutorial.html#setting-up-the-data"><i class="fa fa-check"></i><b>8.1</b> Setting up the data</a></li>
<li class="chapter" data-level="8.2" data-path="vegan-tutorial.html"><a href="vegan-tutorial.html#jaccard-similarity"><i class="fa fa-check"></i><b>8.2</b> Jaccard similarity</a></li>
<li class="chapter" data-level="8.3" data-path="vegan-tutorial.html"><a href="vegan-tutorial.html#species-accumulation-curves"><i class="fa fa-check"></i><b>8.3</b> Species Accumulation Curves</a></li>
<li class="chapter" data-level="8.4" data-path="vegan-tutorial.html"><a href="vegan-tutorial.html#rank-abundance-curves"><i class="fa fa-check"></i><b>8.4</b> Rank Abundance Curves</a></li>
<li class="chapter" data-level="8.5" data-path="vegan-tutorial.html"><a href="vegan-tutorial.html#shannon-index-diversity"><i class="fa fa-check"></i><b>8.5</b> Shannon Index &amp; Diversity</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="tidyr-tutorial.html"><a href="tidyr-tutorial.html"><i class="fa fa-check"></i><b>9</b> Wrangling, reshaping, and tidying data with <code>tidyr</code></a>
<ul>
<li class="chapter" data-level="9.1" data-path="tidyr-tutorial.html"><a href="tidyr-tutorial.html#tidy-data"><i class="fa fa-check"></i><b>9.1</b> Tidy data</a></li>
<li class="chapter" data-level="9.2" data-path="tidyr-tutorial.html"><a href="tidyr-tutorial.html#pivot-longer-tutorial"><i class="fa fa-check"></i><b>9.2</b> Going from many columns to many rows: <code>pivot_longer()</code></a></li>
<li class="chapter" data-level="9.3" data-path="tidyr-tutorial.html"><a href="tidyr-tutorial.html#separate-tutorial"><i class="fa fa-check"></i><b>9.3</b> Splitting and merging columns: <code>separate() and unite()</code></a></li>
<li class="chapter" data-level="9.4" data-path="tidyr-tutorial.html"><a href="tidyr-tutorial.html#pivot-longer-multi-tutorial"><i class="fa fa-check"></i><b>9.4</b> Pivoting multiple columns</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="tidyr-tutorial.html"><a href="tidyr-tutorial.html#combining-pivot_longer-with-summarise"><i class="fa fa-check"></i><b>9.4.1</b> Combining <code>pivot_longer()</code> with <code>summarise()</code></a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Field Problems and Lab activities</b></span></li>
<li class="chapter" data-level="10" data-path="lab-succession.html"><a href="lab-succession.html"><i class="fa fa-check"></i><b>10</b> Succession Lab</a>
<ul>
<li class="chapter" data-level="10.1" data-path="lab-succession.html"><a href="lab-succession.html#introduction-to-the-lab"><i class="fa fa-check"></i><b>10.1</b> Introduction to the lab</a></li>
<li class="chapter" data-level="10.2" data-path="lab-succession.html"><a href="lab-succession.html#materials-and-methods"><i class="fa fa-check"></i><b>10.2</b> Materials and Methods</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="lab-succession.html"><a href="lab-succession.html#bfl-habitat-regions"><i class="fa fa-check"></i><b>10.2.1</b> BFL habitat regions</a></li>
<li class="chapter" data-level="10.2.2" data-path="lab-succession.html"><a href="lab-succession.html#data-collection"><i class="fa fa-check"></i><b>10.2.2</b> Data Collection</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="lab-succession.html"><a href="lab-succession.html#analysis-to-perform"><i class="fa fa-check"></i><b>10.3</b> Analysis to perform</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="lab-succession.html"><a href="lab-succession.html#canopy-tree-density"><i class="fa fa-check"></i><b>10.3.1</b> Canopy tree density</a></li>
<li class="chapter" data-level="10.3.2" data-path="lab-succession.html"><a href="lab-succession.html#species-by-habitat-and-life-stage"><i class="fa fa-check"></i><b>10.3.2</b> Species by habitat and life stage</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="lab-succession.html"><a href="lab-succession.html#discussion-1"><i class="fa fa-check"></i><b>10.4</b> Discussion</a></li>
<li class="chapter" data-level="10.5" data-path="lab-succession.html"><a href="lab-succession.html#general-comments-post-review"><i class="fa fa-check"></i><b>10.5</b> General Comments (Post-Review)</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="lab-succession.html"><a href="lab-succession.html#figures-2"><i class="fa fa-check"></i><b>10.5.1</b> Figures</a></li>
<li class="chapter" data-level="10.5.2" data-path="lab-succession.html"><a href="lab-succession.html#write-this-like-youre-trying-to-publish-it"><i class="fa fa-check"></i><b>10.5.2</b> Write this like you’re trying to publish it</a></li>
<li class="chapter" data-level="10.5.3" data-path="lab-succession.html"><a href="lab-succession.html#describe-the-habitats"><i class="fa fa-check"></i><b>10.5.3</b> Describe the habitats</a></li>
<li class="chapter" data-level="10.5.4" data-path="lab-succession.html"><a href="lab-succession.html#the-analysis"><i class="fa fa-check"></i><b>10.5.4</b> The Analysis</a></li>
<li class="chapter" data-level="10.5.5" data-path="lab-succession.html"><a href="lab-succession.html#keeping-things-in-the-right-sections"><i class="fa fa-check"></i><b>10.5.5</b> Keeping things in the right sections</a></li>
<li class="chapter" data-level="10.5.6" data-path="lab-succession.html"><a href="lab-succession.html#basic-style-and-format-rules"><i class="fa fa-check"></i><b>10.5.6</b> Basic style and format rules</a></li>
<li class="chapter" data-level="10.5.7" data-path="lab-succession.html"><a href="lab-succession.html#other-comments"><i class="fa fa-check"></i><b>10.5.7</b> Other Comments</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="mark-release-recapture-mrr-lab.html"><a href="mark-release-recapture-mrr-lab.html"><i class="fa fa-check"></i><b>11</b> Mark-Release-Recapture (MRR) Lab</a>
<ul>
<li class="chapter" data-level="11.1" data-path="mark-release-recapture-mrr-lab.html"><a href="mark-release-recapture-mrr-lab.html#introduction-1"><i class="fa fa-check"></i><b>11.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="mark-release-recapture-mrr-lab.html"><a href="mark-release-recapture-mrr-lab.html#the-lincoln-petersen-model"><i class="fa fa-check"></i><b>11.1.1</b> The Lincoln-Petersen model</a></li>
<li class="chapter" data-level="11.1.2" data-path="mark-release-recapture-mrr-lab.html"><a href="mark-release-recapture-mrr-lab.html#heliconius-butterflies"><i class="fa fa-check"></i><b>11.1.2</b> <em>Heliconius</em> butterflies</a></li>
<li class="chapter" data-level="11.1.3" data-path="mark-release-recapture-mrr-lab.html"><a href="mark-release-recapture-mrr-lab.html#hardy-weinberg-equilbrium"><i class="fa fa-check"></i><b>11.1.3</b> Hardy-Weinberg Equilbrium</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="mark-release-recapture-mrr-lab.html"><a href="mark-release-recapture-mrr-lab.html#questions-and-hypotheses"><i class="fa fa-check"></i><b>11.2</b> Questions and hypotheses</a></li>
<li class="chapter" data-level="11.3" data-path="mark-release-recapture-mrr-lab.html"><a href="mark-release-recapture-mrr-lab.html#field-methods"><i class="fa fa-check"></i><b>11.3</b> Field Methods</a></li>
<li class="chapter" data-level="11.4" data-path="mark-release-recapture-mrr-lab.html"><a href="mark-release-recapture-mrr-lab.html#analysis"><i class="fa fa-check"></i><b>11.4</b> Analysis</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="mark-release-recapture-mrr-lab.html"><a href="mark-release-recapture-mrr-lab.html#effect-of-sampling-intensity-on-lincoln-petersen-hatn-estimates"><i class="fa fa-check"></i><b>11.4.1</b> Effect of sampling intensity on Lincoln-Petersen <span class="math inline">\(\hat{N}\)</span> estimates</a></li>
<li class="chapter" data-level="11.4.2" data-path="mark-release-recapture-mrr-lab.html"><a href="mark-release-recapture-mrr-lab.html#sex-ratios"><i class="fa fa-check"></i><b>11.4.2</b> Sex ratios</a></li>
<li class="chapter" data-level="11.4.3" data-path="mark-release-recapture-mrr-lab.html"><a href="mark-release-recapture-mrr-lab.html#comparison-of-lincoln-petersen-with-alternative-method"><i class="fa fa-check"></i><b>11.4.3</b> Comparison of Lincoln-Petersen with alternative method</a></li>
<li class="chapter" data-level="11.4.4" data-path="mark-release-recapture-mrr-lab.html"><a href="mark-release-recapture-mrr-lab.html#hardy-weinberg"><i class="fa fa-check"></i><b>11.4.4</b> Hardy-Weinberg</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="mark-release-recapture-mrr-lab.html"><a href="mark-release-recapture-mrr-lab.html#discussion-2"><i class="fa fa-check"></i><b>11.5</b> Discussion</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="Lab-heterogeneity.html"><a href="Lab-heterogeneity.html"><i class="fa fa-check"></i><b>12</b> Heterogeneity Lab:</a>
<ul>
<li class="chapter" data-level="12.1" data-path="Lab-heterogeneity.html"><a href="Lab-heterogeneity.html#introduction-background"><i class="fa fa-check"></i><b>12.1</b> Introduction &amp; background</a></li>
<li class="chapter" data-level="12.2" data-path="Lab-heterogeneity.html"><a href="Lab-heterogeneity.html#questions-and-hypotheses-1"><i class="fa fa-check"></i><b>12.2</b> Questions and Hypotheses</a></li>
<li class="chapter" data-level="12.3" data-path="Lab-heterogeneity.html"><a href="Lab-heterogeneity.html#field-methods-1"><i class="fa fa-check"></i><b>12.3</b> Field Methods</a></li>
<li class="chapter" data-level="12.4" data-path="Lab-heterogeneity.html"><a href="Lab-heterogeneity.html#analyses"><i class="fa fa-check"></i><b>12.4</b> Analyses</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="Lab-heterogeneity.html"><a href="Lab-heterogeneity.html#calibrating-canopy-estimates"><i class="fa fa-check"></i><b>12.4.1</b> Calibrating canopy estimates</a></li>
<li class="chapter" data-level="12.4.2" data-path="Lab-heterogeneity.html"><a href="Lab-heterogeneity.html#relationship-between-canopy-and-ground-cover"><i class="fa fa-check"></i><b>12.4.2</b> Relationship between canopy and ground cover</a></li>
<li class="chapter" data-level="12.4.3" data-path="Lab-heterogeneity.html"><a href="Lab-heterogeneity.html#quantifying-the-spatial-mosaic"><i class="fa fa-check"></i><b>12.4.3</b> Quantifying the spatial mosaic</a></li>
<li class="chapter" data-level="12.4.4" data-path="Lab-heterogeneity.html"><a href="Lab-heterogeneity.html#historical-comparison"><i class="fa fa-check"></i><b>12.4.4</b> Historical comparison</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Lab-heterogeneity.html"><a href="Lab-heterogeneity.html#references"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="Lab-ants.html"><a href="Lab-ants.html"><i class="fa fa-check"></i><b>13</b> Ant Lab: Ant Community Ecology and the Effects of Invasive Fire Ants</a>
<ul>
<li class="chapter" data-level="13.1" data-path="Lab-ants.html"><a href="Lab-ants.html#background"><i class="fa fa-check"></i><b>13.1</b> Background</a></li>
<li class="chapter" data-level="13.2" data-path="Lab-ants.html"><a href="Lab-ants.html#questions-and-hypotheses-2"><i class="fa fa-check"></i><b>13.2</b> Questions and hypotheses</a></li>
<li class="chapter" data-level="13.3" data-path="Lab-ants.html"><a href="Lab-ants.html#methods-1"><i class="fa fa-check"></i><b>13.3</b> Methods</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="Lab-ants.html"><a href="Lab-ants.html#bait-survey"><i class="fa fa-check"></i><b>13.3.1</b> Bait Survey</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="Lab-ants.html"><a href="Lab-ants.html#analysis-1"><i class="fa fa-check"></i><b>13.4</b> Analysis</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="Lab-ants.html"><a href="Lab-ants.html#s.-invicta-habitat-preference"><i class="fa fa-check"></i><b>13.4.1</b> <em>S. invicta</em> habitat preference</a></li>
<li class="chapter" data-level="13.4.2" data-path="Lab-ants.html"><a href="Lab-ants.html#ant-community-differences"><i class="fa fa-check"></i><b>13.4.2</b> Ant community differences</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Lab-ants.html"><a href="Lab-ants.html#references-1"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="Lab-phorid.html"><a href="Lab-phorid.html"><i class="fa fa-check"></i><b>14</b> Phorid Lab: Parasitoid impacts on host foraging behavior with Phorid flies and fire ants</a>
<ul>
<li class="chapter" data-level="14.1" data-path="Lab-phorid.html"><a href="Lab-phorid.html#background-1"><i class="fa fa-check"></i><b>14.1</b> Background</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="Lab-phorid.html"><a href="Lab-phorid.html#fire-ants-and-phorid-flies"><i class="fa fa-check"></i><b>14.1.1</b> Fire ants and phorid flies</a></li>
<li class="chapter" data-level="14.1.2" data-path="Lab-phorid.html"><a href="Lab-phorid.html#fire-ants-natural-history"><i class="fa fa-check"></i><b>14.1.2</b> Fire ants natural history</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="Lab-phorid.html"><a href="Lab-phorid.html#objectives"><i class="fa fa-check"></i><b>14.2</b> Objectives</a></li>
<li class="chapter" data-level="14.3" data-path="Lab-phorid.html"><a href="Lab-phorid.html#methods-2"><i class="fa fa-check"></i><b>14.3</b> Methods</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="Lab-phorid.html"><a href="Lab-phorid.html#phorid-impact-on-fire-ant-foraging"><i class="fa fa-check"></i><b>14.3.1</b> Phorid impact on fire ant foraging</a></li>
<li class="chapter" data-level="14.3.2" data-path="Lab-phorid.html"><a href="Lab-phorid.html#using-the-hobo-mx2303-data-logger"><i class="fa fa-check"></i><b>14.3.2</b> Using the HOBO MX2303 data logger</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="Lab-phorid.html"><a href="Lab-phorid.html#analysis-2"><i class="fa fa-check"></i><b>14.4</b> Analysis</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="Lab-phorid.html"><a href="Lab-phorid.html#effect-of-phorids-on-ant-foraging"><i class="fa fa-check"></i><b>14.4.1</b> Effect of phorids on ant foraging</a></li>
<li class="chapter" data-level="14.4.2" data-path="Lab-phorid.html"><a href="Lab-phorid.html#effects-of-environmental-conditions"><i class="fa fa-check"></i><b>14.4.2</b> Effects of environmental conditions</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="Lab-phorid.html"><a href="Lab-phorid.html#discussion-3"><i class="fa fa-check"></i><b>14.5</b> Discussion</a></li>
<li class="chapter" data-level="14.6" data-path="Lab-phorid.html"><a href="Lab-phorid.html#some-questions-from-previous-semesters"><i class="fa fa-check"></i><b>14.6</b> Some questions from previous semesters:</a></li>
<li class="chapter" data-level="" data-path="Lab-phorid.html"><a href="Lab-phorid.html#references-2"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Bio 373L Survival Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="vegan-tutorial" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Community ecology analyses with <code>vegan</code></h1>
<p>This appendix is a companion to the ant community ecology lab. If you haven’t already, please install the <code>vegan</code> package with <code>install.packages("vegan")</code> and put the <a href="https://github.com/Christopher-Peterson/Bio373L-Book/tree/master/example_data">ant_data_F18.csv</a> file in your <code>example_data</code> directory.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="vegan-tutorial.html#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load packages &amp; data</span></span>
<span id="cb127-2"><a href="vegan-tutorial.html#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) </span>
<span id="cb127-3"><a href="vegan-tutorial.html#cb127-3" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;vegan&quot;) # uncomment if necessary</span></span>
<span id="cb127-4"><a href="vegan-tutorial.html#cb127-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vegan) </span>
<span id="cb127-5"><a href="vegan-tutorial.html#cb127-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot)</span>
<span id="cb127-6"><a href="vegan-tutorial.html#cb127-6" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_cowplot</span>())</span></code></pre></div>
<div id="setting-up-the-data" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> Setting up the data</h2>
<p>Read in the new dataset.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="vegan-tutorial.html#cb128-1" aria-hidden="true" tabindex="-1"></a>wide_ant_data <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;example_data/ant_data_F19.csv&quot;</span>) </span>
<span id="cb128-2"><a href="vegan-tutorial.html#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(wide_ant_data)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Habitat
</th>
<th style="text-align:right;">
Site
</th>
<th style="text-align:right;">
Canopy_cover
</th>
<th style="text-align:right;">
Ground_cover
</th>
<th style="text-align:left;">
Nearest_canopy_spp
</th>
<th style="text-align:left;">
Disturbance
</th>
<th style="text-align:right;">
Drought
</th>
<th style="text-align:right;">
Phorids
</th>
<th style="text-align:left;">
Notes
</th>
<th style="text-align:right;">
GPS_Easting
</th>
<th style="text-align:right;">
GPS_Northing
</th>
<th style="text-align:left;">
name
</th>
<th style="text-align:right;">
Acre
</th>
<th style="text-align:right;">
Total_ants
</th>
<th style="text-align:right;">
S_invicta_present
</th>
<th style="text-align:right;">
Solenopsis_invicta
</th>
<th style="text-align:right;">
Pheidole_floridana
</th>
<th style="text-align:right;">
Pheidole_tetra
</th>
<th style="text-align:right;">
Solenopsis_texana
</th>
<th style="text-align:right;">
Camponotus_texanus
</th>
<th style="text-align:right;">
Aphenogaster_texana
</th>
<th style="text-align:right;">
Brachymyermex
</th>
<th style="text-align:right;">
Crematogaster_laeviuscula
</th>
<th style="text-align:right;">
Forelius_mccooki
</th>
<th style="text-align:right;">
Forelius_pruinosis
</th>
<th style="text-align:right;">
Monomorium_minimum
</th>
<th style="text-align:right;">
Odontomachus_clarus
</th>
<th style="text-align:right;">
Paratrechina_terricola
</th>
<th style="text-align:right;">
Pheidole_bicarinata
</th>
<th style="text-align:right;">
Pheidole_dentata
</th>
<th style="text-align:right;">
Pheidole_lamia
</th>
<th style="text-align:right;">
Pheidole_metallescens
</th>
<th style="text-align:right;">
Pheidole_pelor
</th>
<th style="text-align:right;">
Pheilode_hyati
</th>
<th style="text-align:right;">
Pseudomyrmex_brunneus
</th>
<th style="text-align:right;">
Solenopsis_geminata
</th>
<th style="text-align:right;">
Atta_texana
</th>
<th style="text-align:right;">
Camponotus_sansabeaneus
</th>
<th style="text-align:right;">
Pachycondyla_harpax
</th>
<th style="text-align:right;">
Other_species
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
American Elm
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
105
</td>
<td style="text-align:right;">
815
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
250
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
250
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
yellow jackets
</td>
<td style="text-align:right;">
96
</td>
<td style="text-align:right;">
826
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
hackberry
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
yellow jackets
</td>
<td style="text-align:right;">
86
</td>
<td style="text-align:right;">
848
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
yellow jackets
</td>
<td style="text-align:right;">
76
</td>
<td style="text-align:right;">
848
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
low
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
87
</td>
<td style="text-align:right;">
862
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
62
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
62
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
104
</td>
<td style="text-align:right;">
842
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
109
</td>
<td style="text-align:right;">
836
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
175
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
175
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
hackberry
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
97
</td>
<td style="text-align:right;">
858
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
350
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
350
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
hackberry
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
flies
</td>
<td style="text-align:right;">
107
</td>
<td style="text-align:right;">
859
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
108
</td>
<td style="text-align:right;">
877
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
200
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
200
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
</div>
<p>Looking at the dataset, there’s a bunch of columns that indicate the number of species present. Let’s make a tidy version of this dataset, which will be easier to work with for some of the functions we’re using. We’ll be using the <code>pivot_longer()</code> function from the <code>tidyr</code> package.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="vegan-tutorial.html#cb129-1" aria-hidden="true" tabindex="-1"></a>tidy_ant_data <span class="ot">=</span> wide_ant_data <span class="sc">%&gt;%</span> </span>
<span id="cb129-2"><a href="vegan-tutorial.html#cb129-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> Solenopsis_invicta<span class="sc">:</span>Other_species, <span class="co"># These are the species columns</span></span>
<span id="cb129-3"><a href="vegan-tutorial.html#cb129-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;Species&quot;</span>, <span class="co"># Put the column name in a &quot;Species&quot; column</span></span>
<span id="cb129-4"><a href="vegan-tutorial.html#cb129-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;N&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># Cell values are counts, so make that an N column</span></span>
<span id="cb129-5"><a href="vegan-tutorial.html#cb129-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># replace the underscores in species names with a space:</span></span>
<span id="cb129-6"><a href="vegan-tutorial.html#cb129-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Species =</span> <span class="fu">str_replace</span>(Species, <span class="st">&quot;_&quot;</span>, <span class="st">&quot; &quot;</span>)) <span class="sc">%&gt;%</span> <span class="co"># str_replace is in the stringr package, which is part of tidyverse</span></span>
<span id="cb129-7"><a href="vegan-tutorial.html#cb129-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(N <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="co"># Remove species that aren&#39;t present</span></span>
<span id="cb129-8"><a href="vegan-tutorial.html#cb129-8" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(tidy_ant_data)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Habitat
</th>
<th style="text-align:right;">
Site
</th>
<th style="text-align:right;">
Canopy_cover
</th>
<th style="text-align:right;">
Ground_cover
</th>
<th style="text-align:left;">
Nearest_canopy_spp
</th>
<th style="text-align:left;">
Disturbance
</th>
<th style="text-align:right;">
Drought
</th>
<th style="text-align:right;">
Phorids
</th>
<th style="text-align:left;">
Notes
</th>
<th style="text-align:right;">
GPS_Easting
</th>
<th style="text-align:right;">
GPS_Northing
</th>
<th style="text-align:left;">
name
</th>
<th style="text-align:right;">
Acre
</th>
<th style="text-align:right;">
Total_ants
</th>
<th style="text-align:right;">
S_invicta_present
</th>
<th style="text-align:left;">
Species
</th>
<th style="text-align:right;">
N
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
American Elm
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
105
</td>
<td style="text-align:right;">
815
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
250
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Solenopsis invicta
</td>
<td style="text-align:right;">
250
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
yellow jackets
</td>
<td style="text-align:right;">
96
</td>
<td style="text-align:right;">
826
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
Pheidole floridana
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
hackberry
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
yellow jackets
</td>
<td style="text-align:right;">
86
</td>
<td style="text-align:right;">
848
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
Pheidole tetra
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
yellow jackets
</td>
<td style="text-align:right;">
76
</td>
<td style="text-align:right;">
848
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
Pheidole tetra
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
low
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
87
</td>
<td style="text-align:right;">
862
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
62
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Solenopsis invicta
</td>
<td style="text-align:right;">
62
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
104
</td>
<td style="text-align:right;">
842
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
Pheidole tetra
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
104
</td>
<td style="text-align:right;">
842
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
Solenopsis texana
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
109
</td>
<td style="text-align:right;">
836
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
175
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Solenopsis invicta
</td>
<td style="text-align:right;">
175
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
hackberry
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
97
</td>
<td style="text-align:right;">
858
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
350
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Solenopsis invicta
</td>
<td style="text-align:right;">
350
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
hackberry
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
flies
</td>
<td style="text-align:right;">
107
</td>
<td style="text-align:right;">
859
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
Pheidole floridana
</td>
<td style="text-align:right;">
30
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="jaccard-similarity" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> Jaccard similarity</h2>
<p>To calculate the Jaccard similarity of two communities, you need to divide the number of shared species by the total number of species. This can be done with a combination of the <code>intersect()</code>, <code>union()</code>, and <code>length()</code> functions.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="vegan-tutorial.html#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Let&#39;s say these are the species in our two communities:</span></span>
<span id="cb130-2"><a href="vegan-tutorial.html#cb130-2" aria-hidden="true" tabindex="-1"></a>com_a <span class="ot">=</span> LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb130-3"><a href="vegan-tutorial.html#cb130-3" aria-hidden="true" tabindex="-1"></a>com_b <span class="ot">=</span> LETTERS[<span class="dv">3</span><span class="sc">:</span><span class="dv">8</span>]</span>
<span id="cb130-4"><a href="vegan-tutorial.html#cb130-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(com_a); <span class="fu">print</span>(com_b)</span>
<span id="cb130-5"><a href="vegan-tutorial.html#cb130-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;E&quot;</span></span>
<span id="cb130-6"><a href="vegan-tutorial.html#cb130-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;C&quot; &quot;D&quot; &quot;E&quot; &quot;F&quot; &quot;G&quot; &quot;H&quot;</span></span>
<span id="cb130-7"><a href="vegan-tutorial.html#cb130-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-8"><a href="vegan-tutorial.html#cb130-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Species in common:</span></span>
<span id="cb130-9"><a href="vegan-tutorial.html#cb130-9" aria-hidden="true" tabindex="-1"></a><span class="fu">intersect</span>(com_a, com_b)</span>
<span id="cb130-10"><a href="vegan-tutorial.html#cb130-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;C&quot; &quot;D&quot; &quot;E&quot;</span></span>
<span id="cb130-11"><a href="vegan-tutorial.html#cb130-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-12"><a href="vegan-tutorial.html#cb130-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Species present in either:</span></span>
<span id="cb130-13"><a href="vegan-tutorial.html#cb130-13" aria-hidden="true" tabindex="-1"></a><span class="fu">union</span>(com_a, com_b)</span>
<span id="cb130-14"><a href="vegan-tutorial.html#cb130-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;E&quot; &quot;F&quot; &quot;G&quot; &quot;H&quot;</span></span>
<span id="cb130-15"><a href="vegan-tutorial.html#cb130-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-16"><a href="vegan-tutorial.html#cb130-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number of species present:</span></span>
<span id="cb130-17"><a href="vegan-tutorial.html#cb130-17" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">union</span>(com_a, com_b))</span>
<span id="cb130-18"><a href="vegan-tutorial.html#cb130-18" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 8</span></span>
<span id="cb130-19"><a href="vegan-tutorial.html#cb130-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-20"><a href="vegan-tutorial.html#cb130-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Jaccard similarity:</span></span>
<span id="cb130-21"><a href="vegan-tutorial.html#cb130-21" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">intersect</span>(com_a, com_b)) <span class="sc">/</span> </span>
<span id="cb130-22"><a href="vegan-tutorial.html#cb130-22" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">union</span>(com_a, com_b))</span>
<span id="cb130-23"><a href="vegan-tutorial.html#cb130-23" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0.375</span></span></code></pre></div>
<p>Since you’ll be doing this for several groups, it’s a good idea to write a function that will do this for us.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="vegan-tutorial.html#cb131-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-2"><a href="vegan-tutorial.html#cb131-2" aria-hidden="true" tabindex="-1"></a>jaccard_similarity <span class="ot">=</span> <span class="cf">function</span>(com_1, com_2) {</span>
<span id="cb131-3"><a href="vegan-tutorial.html#cb131-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># com_1 and com_2 are the arguments of the function, </span></span>
<span id="cb131-4"><a href="vegan-tutorial.html#cb131-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># they should be the names in different communities</span></span>
<span id="cb131-5"><a href="vegan-tutorial.html#cb131-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb131-6"><a href="vegan-tutorial.html#cb131-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create local variables for the intersection and union;</span></span>
<span id="cb131-7"><a href="vegan-tutorial.html#cb131-7" aria-hidden="true" tabindex="-1"></a>  common_spp <span class="ot">=</span> <span class="fu">intersect</span>(com_1, com_2) </span>
<span id="cb131-8"><a href="vegan-tutorial.html#cb131-8" aria-hidden="true" tabindex="-1"></a>  total_spp <span class="ot">=</span> <span class="fu">union</span>(com_1, com_2) </span>
<span id="cb131-9"><a href="vegan-tutorial.html#cb131-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># these variables are created while the function runs &amp; destroyed when it ends</span></span>
<span id="cb131-10"><a href="vegan-tutorial.html#cb131-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># The last value of the function is its output (a.k.a., return value)</span></span>
<span id="cb131-11"><a href="vegan-tutorial.html#cb131-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">length</span>(common_spp) <span class="sc">/</span> <span class="fu">length</span>(total_spp) <span class="co"># return this</span></span>
<span id="cb131-12"><a href="vegan-tutorial.html#cb131-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb131-13"><a href="vegan-tutorial.html#cb131-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-14"><a href="vegan-tutorial.html#cb131-14" aria-hidden="true" tabindex="-1"></a><span class="fu">jaccard_similarity</span>(<span class="at">com_1 =</span> com_a, <span class="at">com_2 =</span> com_b)</span>
<span id="cb131-15"><a href="vegan-tutorial.html#cb131-15" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0.375</span></span></code></pre></div>
<p>How would we make this work with the dataset? Here’s one possibility:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="vegan-tutorial.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the community comparison as disturbed river terrace vs undisturbed river terrace</span></span>
<span id="cb132-2"><a href="vegan-tutorial.html#cb132-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-3"><a href="vegan-tutorial.html#cb132-3" aria-hidden="true" tabindex="-1"></a>com_r_lo <span class="ot">=</span> tidy_ant_data <span class="sc">%&gt;%</span> </span>
<span id="cb132-4"><a href="vegan-tutorial.html#cb132-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Subset the data to get the &quot;community&quot; you want</span></span>
<span id="cb132-5"><a href="vegan-tutorial.html#cb132-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Habitat <span class="sc">==</span> <span class="st">&quot;R&quot;</span>, Disturbance <span class="sc">==</span> <span class="st">&quot;low&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb132-6"><a href="vegan-tutorial.html#cb132-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get the list of species as a vector</span></span>
<span id="cb132-7"><a href="vegan-tutorial.html#cb132-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(Species) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb132-8"><a href="vegan-tutorial.html#cb132-8" aria-hidden="true" tabindex="-1"></a>com_r_hi <span class="ot">=</span> tidy_ant_data <span class="sc">%&gt;%</span> </span>
<span id="cb132-9"><a href="vegan-tutorial.html#cb132-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Habitat <span class="sc">==</span> <span class="st">&quot;R&quot;</span>, Disturbance <span class="sc">==</span> <span class="st">&quot;high&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb132-10"><a href="vegan-tutorial.html#cb132-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(Species) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb132-11"><a href="vegan-tutorial.html#cb132-11" aria-hidden="true" tabindex="-1"></a>com_r_lo</span>
<span id="cb132-12"><a href="vegan-tutorial.html#cb132-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;Solenopsis invicta&quot; &quot;Pheidole floridana&quot; &quot;Pheidole tetra&quot;    </span></span>
<span id="cb132-13"><a href="vegan-tutorial.html#cb132-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [4] &quot;Pheidole pelor&quot;     &quot;Pheidole dentata&quot;   &quot;Other species&quot;</span></span>
<span id="cb132-14"><a href="vegan-tutorial.html#cb132-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-15"><a href="vegan-tutorial.html#cb132-15" aria-hidden="true" tabindex="-1"></a>com_r_hi</span>
<span id="cb132-16"><a href="vegan-tutorial.html#cb132-16" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;Solenopsis invicta&quot;  &quot;Pheidole floridana&quot;  &quot;Pheidole tetra&quot;     </span></span>
<span id="cb132-17"><a href="vegan-tutorial.html#cb132-17" aria-hidden="true" tabindex="-1"></a><span class="do">## [4] &quot;Solenopsis texana&quot;   &quot;Camponotus texanus&quot;  &quot;Pheidole dentata&quot;   </span></span>
<span id="cb132-18"><a href="vegan-tutorial.html#cb132-18" aria-hidden="true" tabindex="-1"></a><span class="do">## [7] &quot;Pheidole bicarinata&quot; &quot;Other species&quot;</span></span>
<span id="cb132-19"><a href="vegan-tutorial.html#cb132-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-20"><a href="vegan-tutorial.html#cb132-20" aria-hidden="true" tabindex="-1"></a><span class="fu">jaccard_similarity</span>(com_r_lo, com_r_hi)</span>
<span id="cb132-21"><a href="vegan-tutorial.html#cb132-21" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0.5555556</span></span></code></pre></div>
<p>There are more elegant &amp; efficient ways to do this, but they rely on some R techniques we haven’t talked about yet; I’ll be updating this chapter once I get the appropriate information into the book.</p>
</div>
<div id="species-accumulation-curves" class="section level2" number="8.3">
<h2><span class="header-section-number">8.3</span> Species Accumulation Curves</h2>
<p>Species accumulation curves are calculated by the <code>specaccum()</code> function in <code>vegan</code>. This function requires a data set where each column is a species, each_row is a site, and each cell is a 1 (indicating presence) or 0 (indicating absence). Let’s create a function that will format the data for this:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="vegan-tutorial.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function that converts a number to presence-absense</span></span>
<span id="cb133-2"><a href="vegan-tutorial.html#cb133-2" aria-hidden="true" tabindex="-1"></a>to_presence_absense <span class="ot">=</span> <span class="cf">function</span>(x) <span class="fu">if_else</span>(x <span class="sc">&lt;=</span> <span class="dv">0</span> <span class="sc">|</span> <span class="fu">is.na</span>(x), <span class="dv">0</span>, <span class="dv">1</span>) <span class="co"># Recodes data as 0 if it&#39;s 0 or missing or 1 otherwise</span></span>
<span id="cb133-3"><a href="vegan-tutorial.html#cb133-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-4"><a href="vegan-tutorial.html#cb133-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Format data for the species accumulation curve</span></span>
<span id="cb133-5"><a href="vegan-tutorial.html#cb133-5" aria-hidden="true" tabindex="-1"></a>format_sac_data <span class="ot">=</span> <span class="cf">function</span>(wide_data) {</span>
<span id="cb133-6"><a href="vegan-tutorial.html#cb133-6" aria-hidden="true" tabindex="-1"></a>    wide_data <span class="sc">%&gt;%</span> </span>
<span id="cb133-7"><a href="vegan-tutorial.html#cb133-7" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Select only species columns</span></span>
<span id="cb133-8"><a href="vegan-tutorial.html#cb133-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(Solenopsis_invicta<span class="sc">:</span>Other_species) <span class="sc">%&gt;%</span> </span>
<span id="cb133-9"><a href="vegan-tutorial.html#cb133-9" aria-hidden="true" tabindex="-1"></a>      <span class="co"># We don&#39;t want to include this &quot;other species&quot;</span></span>
<span id="cb133-10"><a href="vegan-tutorial.html#cb133-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(<span class="sc">-</span>Other_species) <span class="sc">%&gt;%</span> </span>
<span id="cb133-11"><a href="vegan-tutorial.html#cb133-11" aria-hidden="true" tabindex="-1"></a>      <span class="co"># use to_presence_absense() on all columns</span></span>
<span id="cb133-12"><a href="vegan-tutorial.html#cb133-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), to_presence_absense))</span>
<span id="cb133-13"><a href="vegan-tutorial.html#cb133-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb133-14"><a href="vegan-tutorial.html#cb133-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-15"><a href="vegan-tutorial.html#cb133-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Test it on quarry data:</span></span>
<span id="cb133-16"><a href="vegan-tutorial.html#cb133-16" aria-hidden="true" tabindex="-1"></a>wide_ant_data <span class="sc">%&gt;%</span> </span>
<span id="cb133-17"><a href="vegan-tutorial.html#cb133-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Habitat <span class="sc">==</span> <span class="st">&quot;Q&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb133-18"><a href="vegan-tutorial.html#cb133-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Note: depending on the dataset, the Habitat variable may be recoded </span></span>
<span id="cb133-19"><a href="vegan-tutorial.html#cb133-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># as &quot;Quarry&quot;, &quot;River Terrace&quot;, etc instead of &quot;Q&quot;, &quot;R&quot;</span></span>
<span id="cb133-20"><a href="vegan-tutorial.html#cb133-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># You&#39;ll need to change the previous line of code so that it matches</span></span>
<span id="cb133-21"><a href="vegan-tutorial.html#cb133-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># what&#39;s in the dataset.</span></span>
<span id="cb133-22"><a href="vegan-tutorial.html#cb133-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_sac_data</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb133-23"><a href="vegan-tutorial.html#cb133-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
Solenopsis_invicta
</th>
<th style="text-align:right;">
Pheidole_floridana
</th>
<th style="text-align:right;">
Pheidole_tetra
</th>
<th style="text-align:right;">
Solenopsis_texana
</th>
<th style="text-align:right;">
Camponotus_texanus
</th>
<th style="text-align:right;">
Aphenogaster_texana
</th>
<th style="text-align:right;">
Brachymyermex
</th>
<th style="text-align:right;">
Crematogaster_laeviuscula
</th>
<th style="text-align:right;">
Forelius_mccooki
</th>
<th style="text-align:right;">
Forelius_pruinosis
</th>
<th style="text-align:right;">
Monomorium_minimum
</th>
<th style="text-align:right;">
Odontomachus_clarus
</th>
<th style="text-align:right;">
Paratrechina_terricola
</th>
<th style="text-align:right;">
Pheidole_bicarinata
</th>
<th style="text-align:right;">
Pheidole_dentata
</th>
<th style="text-align:right;">
Pheidole_lamia
</th>
<th style="text-align:right;">
Pheidole_metallescens
</th>
<th style="text-align:right;">
Pheidole_pelor
</th>
<th style="text-align:right;">
Pheilode_hyati
</th>
<th style="text-align:right;">
Pseudomyrmex_brunneus
</th>
<th style="text-align:right;">
Solenopsis_geminata
</th>
<th style="text-align:right;">
Atta_texana
</th>
<th style="text-align:right;">
Camponotus_sansabeaneus
</th>
<th style="text-align:right;">
Pachycondyla_harpax
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
</div>
<p>From here, you can</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="vegan-tutorial.html#cb134-1" aria-hidden="true" tabindex="-1"></a>sac_r <span class="ot">=</span> wide_ant_data <span class="sc">%&gt;%</span> </span>
<span id="cb134-2"><a href="vegan-tutorial.html#cb134-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Habitat <span class="sc">==</span> <span class="st">&quot;R&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb134-3"><a href="vegan-tutorial.html#cb134-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_sac_data</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb134-4"><a href="vegan-tutorial.html#cb134-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">specaccum</span>(<span class="at">method =</span> <span class="st">&quot;random&quot;</span>, <span class="at">permutations =</span> <span class="dv">500</span>)   <span class="co"># Use these argument options</span></span></code></pre></div>
<p>Use <code>print(sac_r)</code> to look at the output. The results are basically a tidy data frame turned on its side: one row for the number of sites sampled, one for the estimated richness, and one for the error around the richness estimate. To plot this, we need to re-format the output.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="vegan-tutorial.html#cb135-1" aria-hidden="true" tabindex="-1"></a>sac_r_tidy <span class="ot">=</span> </span>
<span id="cb135-2"><a href="vegan-tutorial.html#cb135-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb135-3"><a href="vegan-tutorial.html#cb135-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">sites =</span> sac_r<span class="sc">$</span>sites,</span>
<span id="cb135-4"><a href="vegan-tutorial.html#cb135-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">richness =</span> sac_r<span class="sc">$</span>richness,</span>
<span id="cb135-5"><a href="vegan-tutorial.html#cb135-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">se =</span> sac_r<span class="sc">$</span>sd <span class="co"># the &quot;SD&quot; column is actually a standard error measure</span></span>
<span id="cb135-6"><a href="vegan-tutorial.html#cb135-6" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb135-7"><a href="vegan-tutorial.html#cb135-7" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(sac_r_tidy)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
sites
</th>
<th style="text-align:right;">
richness
</th>
<th style="text-align:right;">
se
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.946
</td>
<td style="text-align:right;">
0.3511847
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.708
</td>
<td style="text-align:right;">
0.5543922
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2.326
</td>
<td style="text-align:right;">
0.7381149
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2.794
</td>
<td style="text-align:right;">
0.8654838
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
3.188
</td>
<td style="text-align:right;">
0.9243185
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
3.516
</td>
<td style="text-align:right;">
0.9796241
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
3.810
</td>
<td style="text-align:right;">
0.9979438
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
4.074
</td>
<td style="text-align:right;">
1.0191179
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
4.302
</td>
<td style="text-align:right;">
1.0103651
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
4.546
</td>
<td style="text-align:right;">
1.0089201
</td>
</tr>
</tbody>
</table>
</div>
<p>From this, it’s relatively simple to create the actual plot:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="vegan-tutorial.html#cb136-1" aria-hidden="true" tabindex="-1"></a>sac_r_plot <span class="ot">=</span> sac_r_tidy <span class="sc">%&gt;%</span> </span>
<span id="cb136-2"><a href="vegan-tutorial.html#cb136-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Define the confidence intervals based on mean richness &amp; standard errors</span></span>
<span id="cb136-3"><a href="vegan-tutorial.html#cb136-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lower_ci =</span> richness <span class="sc">-</span> se <span class="sc">*</span> <span class="fl">1.96</span>,</span>
<span id="cb136-4"><a href="vegan-tutorial.html#cb136-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">upper_ci =</span> richness <span class="sc">+</span> se <span class="sc">*</span> <span class="fl">1.96</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb136-5"><a href="vegan-tutorial.html#cb136-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> sites, <span class="at">y =</span> richness) <span class="sc">+</span></span>
<span id="cb136-6"><a href="vegan-tutorial.html#cb136-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="co"># line for richness</span></span>
<span id="cb136-7"><a href="vegan-tutorial.html#cb136-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># The lines below add in confidence intervals</span></span>
<span id="cb136-8"><a href="vegan-tutorial.html#cb136-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> lower_ci), <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">alpha =</span> .<span class="dv">7</span>) <span class="sc">+</span> </span>
<span id="cb136-9"><a href="vegan-tutorial.html#cb136-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> upper_ci), <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">alpha =</span> .<span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb136-10"><a href="vegan-tutorial.html#cb136-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># alpha adds a bit of transparency</span></span>
<span id="cb136-11"><a href="vegan-tutorial.html#cb136-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Sampling intensity (number of sites)&quot;</span>) <span class="sc">+</span></span>
<span id="cb136-12"><a href="vegan-tutorial.html#cb136-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Number of ant species&quot;</span>)</span>
<span id="cb136-13"><a href="vegan-tutorial.html#cb136-13" aria-hidden="true" tabindex="-1"></a>sac_r_plot</span></code></pre></div>
<p><img src="Bio373L-Book_files/figure-html/a6_sac_plot1-1.png" width="672" />
Let’s combine these last few steps into a pair of functions, for re-use with different data sub-sets:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="vegan-tutorial.html#cb137-1" aria-hidden="true" tabindex="-1"></a>get_sac <span class="ot">=</span> <span class="cf">function</span>(wide_data) {</span>
<span id="cb137-2"><a href="vegan-tutorial.html#cb137-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># wide_data is data in the wide format, probably subset or filtered</span></span>
<span id="cb137-3"><a href="vegan-tutorial.html#cb137-3" aria-hidden="true" tabindex="-1"></a>  sac <span class="ot">=</span> <span class="fu">format_sac_data</span>(wide_data) <span class="sc">%&gt;%</span> <span class="co"># Convert to SAC format</span></span>
<span id="cb137-4"><a href="vegan-tutorial.html#cb137-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">specaccum</span>(<span class="at">method =</span> <span class="st">&quot;random&quot;</span>, <span class="at">permutations =</span> <span class="dv">500</span>) <span class="co"># calculate SAC</span></span>
<span id="cb137-5"><a href="vegan-tutorial.html#cb137-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>( <span class="co"># Tidy output</span></span>
<span id="cb137-6"><a href="vegan-tutorial.html#cb137-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">sites =</span> sac<span class="sc">$</span>sites,</span>
<span id="cb137-7"><a href="vegan-tutorial.html#cb137-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">richness =</span> sac<span class="sc">$</span>richness,</span>
<span id="cb137-8"><a href="vegan-tutorial.html#cb137-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">se =</span> sac<span class="sc">$</span>sd</span>
<span id="cb137-9"><a href="vegan-tutorial.html#cb137-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span>   </span>
<span id="cb137-10"><a href="vegan-tutorial.html#cb137-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">lower_ci =</span> richness <span class="sc">-</span> se <span class="sc">*</span> <span class="fl">1.96</span>,</span>
<span id="cb137-11"><a href="vegan-tutorial.html#cb137-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">upper_ci =</span> richness <span class="sc">+</span> se <span class="sc">*</span> <span class="fl">1.96</span>)</span>
<span id="cb137-12"><a href="vegan-tutorial.html#cb137-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb137-13"><a href="vegan-tutorial.html#cb137-13" aria-hidden="true" tabindex="-1"></a>plot_sac <span class="ot">=</span> <span class="cf">function</span>(sac_data) {</span>
<span id="cb137-14"><a href="vegan-tutorial.html#cb137-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># sac_data is the output of get_sac()</span></span>
<span id="cb137-15"><a href="vegan-tutorial.html#cb137-15" aria-hidden="true" tabindex="-1"></a>  sac_data <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb137-16"><a href="vegan-tutorial.html#cb137-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> sites, <span class="at">y =</span> richness) <span class="sc">+</span></span>
<span id="cb137-17"><a href="vegan-tutorial.html#cb137-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="co"># line for richness</span></span>
<span id="cb137-18"><a href="vegan-tutorial.html#cb137-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The lines below add in confidence intervals</span></span>
<span id="cb137-19"><a href="vegan-tutorial.html#cb137-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> lower_ci), <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">alpha =</span> .<span class="dv">7</span>) <span class="sc">+</span> </span>
<span id="cb137-20"><a href="vegan-tutorial.html#cb137-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> upper_ci), <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">alpha =</span> .<span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb137-21"><a href="vegan-tutorial.html#cb137-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># alpha adds a bit of transparency</span></span>
<span id="cb137-22"><a href="vegan-tutorial.html#cb137-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;Sampling intensity (number of sites)&quot;</span>) <span class="sc">+</span></span>
<span id="cb137-23"><a href="vegan-tutorial.html#cb137-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">&quot;Number of ant species&quot;</span>)</span>
<span id="cb137-24"><a href="vegan-tutorial.html#cb137-24" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>From here, we easily try different combinations</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="vegan-tutorial.html#cb138-1" aria-hidden="true" tabindex="-1"></a>wide_ant_data <span class="sc">%&gt;%</span> </span>
<span id="cb138-2"><a href="vegan-tutorial.html#cb138-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Habitat <span class="sc">==</span> <span class="st">&quot;P&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb138-3"><a href="vegan-tutorial.html#cb138-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_sac</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb138-4"><a href="vegan-tutorial.html#cb138-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_sac</span>()</span></code></pre></div>
<p><img src="Bio373L-Book_files/figure-html/a6_sac_expt1-1.png" width="672" /></p>
<p>When comparing multiple groups, it’s best to put them together in a single plot. The easiest way to do that is to calculate the SAC data, then combine the resulting data frames</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="vegan-tutorial.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the SAC data frames for each group in your comparison</span></span>
<span id="cb139-2"><a href="vegan-tutorial.html#cb139-2" aria-hidden="true" tabindex="-1"></a>sac_dist_hi <span class="ot">=</span> wide_ant_data <span class="sc">%&gt;%</span> </span>
<span id="cb139-3"><a href="vegan-tutorial.html#cb139-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Disturbance <span class="sc">==</span> <span class="st">&quot;high&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb139-4"><a href="vegan-tutorial.html#cb139-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_sac</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb139-5"><a href="vegan-tutorial.html#cb139-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Disturbance =</span> <span class="st">&quot;high&quot;</span>) <span class="co"># Use the Mutate Add disturbance column to sac results</span></span>
<span id="cb139-6"><a href="vegan-tutorial.html#cb139-6" aria-hidden="true" tabindex="-1"></a>sac_dist_low <span class="ot">=</span> wide_ant_data <span class="sc">%&gt;%</span> </span>
<span id="cb139-7"><a href="vegan-tutorial.html#cb139-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Disturbance <span class="sc">==</span> <span class="st">&quot;low&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb139-8"><a href="vegan-tutorial.html#cb139-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_sac</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb139-9"><a href="vegan-tutorial.html#cb139-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Disturbance =</span> <span class="st">&quot;low&quot;</span>) <span class="co"># Add disturbance column back to sac results</span></span>
<span id="cb139-10"><a href="vegan-tutorial.html#cb139-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-11"><a href="vegan-tutorial.html#cb139-11" aria-hidden="true" tabindex="-1"></a>sac_dist_combined <span class="ot">=</span> <span class="co"># Combine them into one data frame</span></span>
<span id="cb139-12"><a href="vegan-tutorial.html#cb139-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(sac_dist_hi, sac_dist_low) <span class="co"># Note that bind_rows() can combine more than two data frames, if you&#39;re doing a 3+ part comparison</span></span>
<span id="cb139-13"><a href="vegan-tutorial.html#cb139-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-14"><a href="vegan-tutorial.html#cb139-14" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_sac</span>(sac_dist_combined) <span class="sc">+</span> <span class="co"># Creates a standard SAC Plot</span></span>
<span id="cb139-15"><a href="vegan-tutorial.html#cb139-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">color=</span>Disturbance) <span class="sc">+</span>    <span class="co"># Separates out the lines by color based on the Disturbance column</span></span>
<span id="cb139-16"><a href="vegan-tutorial.html#cb139-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()     <span class="co"># Make the colors look nice</span></span></code></pre></div>
<p><img src="Bio373L-Book_files/figure-html/a6_sac_expt2-1.png" width="672" /></p>
</div>
<div id="rank-abundance-curves" class="section level2" number="8.4">
<h2><span class="header-section-number">8.4</span> Rank Abundance Curves</h2>
<p>This is really just an exercise in data manipulation: we want to get the total number of individuals of each species, then display them in decreasing frequency. You need to summarize your data frame so that there’s one row per species, with columns Species and N (which is the species-level sum of the already existing N column in <code>tidy_ant_data</code>). I’m not providing the code for this; you should be able to piece it together from the dplyr and/or ggplot appendices. I would recommend creating a function that does the work, so that you can reuse it.</p>
<p>To make the plot itself, you can use this function:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="vegan-tutorial.html#cb140-1" aria-hidden="true" tabindex="-1"></a>plot_rank_abundance <span class="ot">=</span> <span class="cf">function</span>(summarized_data, <span class="at">right_margin =</span> <span class="fl">2.8</span>) {</span>
<span id="cb140-2"><a href="vegan-tutorial.html#cb140-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Make the rank abundance plot</span></span>
<span id="cb140-3"><a href="vegan-tutorial.html#cb140-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># The right_margin argument is used to make sure that </span></span>
<span id="cb140-4"><a href="vegan-tutorial.html#cb140-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># the angled axis labels don&#39;t go of the page</span></span>
<span id="cb140-5"><a href="vegan-tutorial.html#cb140-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># make it larger or smaller to suit your tastes</span></span>
<span id="cb140-6"><a href="vegan-tutorial.html#cb140-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(summarized_data, <span class="fu">aes</span>(<span class="at">x =</span> Species, <span class="at">y =</span> N)) <span class="sc">+</span></span>
<span id="cb140-7"><a href="vegan-tutorial.html#cb140-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">group =</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="co"># Create a descending line</span></span>
<span id="cb140-8"><a href="vegan-tutorial.html#cb140-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_log10</span>() <span class="sc">+</span> <span class="co"># puts y axis on log scale</span></span>
<span id="cb140-9"><a href="vegan-tutorial.html#cb140-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="co"># cleans up appearance of x axis labels</span></span>
<span id="cb140-10"><a href="vegan-tutorial.html#cb140-10" aria-hidden="true" tabindex="-1"></a>            <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="sc">-</span><span class="dv">20</span>, <span class="at">hjust =</span> <span class="fl">0.05</span>, <span class="co"># angled, justified text</span></span>
<span id="cb140-11"><a href="vegan-tutorial.html#cb140-11" aria-hidden="true" tabindex="-1"></a>                         <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">face =</span> <span class="st">&quot;italic&quot;</span>), <span class="co"># also in italics</span></span>
<span id="cb140-12"><a href="vegan-tutorial.html#cb140-12" aria-hidden="true" tabindex="-1"></a>          <span class="co"># makes sure that the axis labels don&#39;t go off the page</span></span>
<span id="cb140-13"><a href="vegan-tutorial.html#cb140-13" aria-hidden="true" tabindex="-1"></a>          <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">c</span>(<span class="dv">0</span>,right_margin,<span class="dv">0</span>,<span class="dv">0</span>)<span class="sc">+</span>.<span class="dv">1</span>, <span class="st">&quot;cm&quot;</span>))</span>
<span id="cb140-14"><a href="vegan-tutorial.html#cb140-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Be sure sure that Species has been coded as a factor, in decreasing order of N!</span></span>
<span id="cb140-15"><a href="vegan-tutorial.html#cb140-15" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Your resulting plot should look something like this:</p>
<p><img src="Bio373L-Book_files/figure-html/a6_plot_rank_abund_hidden-1.png" width="672" /></p>
</div>
<div id="shannon-index-diversity" class="section level2" number="8.5">
<h2><span class="header-section-number">8.5</span> Shannon Index &amp; Diversity</h2>
<p>Let’s make a function that calculates the Shannon index of a community:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="vegan-tutorial.html#cb141-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-2"><a href="vegan-tutorial.html#cb141-2" aria-hidden="true" tabindex="-1"></a>shannon_diversity <span class="ot">=</span> <span class="cf">function</span>(species, count) {</span>
<span id="cb141-3"><a href="vegan-tutorial.html#cb141-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># species: vector of species names; </span></span>
<span id="cb141-4"><a href="vegan-tutorial.html#cb141-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># count: how many of each species are present</span></span>
<span id="cb141-5"><a href="vegan-tutorial.html#cb141-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb141-6"><a href="vegan-tutorial.html#cb141-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create p, a vector of relative frequencies</span></span>
<span id="cb141-7"><a href="vegan-tutorial.html#cb141-7" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">=</span> <span class="fu">tibble</span>(species, count) <span class="sc">%&gt;%</span> </span>
<span id="cb141-8"><a href="vegan-tutorial.html#cb141-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Merge duplicate species </span></span>
<span id="cb141-9"><a href="vegan-tutorial.html#cb141-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb141-10"><a href="vegan-tutorial.html#cb141-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">sum</span>(count)) <span class="sc">%&gt;%</span> </span>
<span id="cb141-11"><a href="vegan-tutorial.html#cb141-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb141-12"><a href="vegan-tutorial.html#cb141-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove zeroes</span></span>
<span id="cb141-13"><a href="vegan-tutorial.html#cb141-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(count <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb141-14"><a href="vegan-tutorial.html#cb141-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert to frequencies</span></span>
<span id="cb141-15"><a href="vegan-tutorial.html#cb141-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">p =</span> count <span class="sc">/</span> <span class="fu">sum</span>(count)) <span class="sc">%&gt;%</span> </span>
<span id="cb141-16"><a href="vegan-tutorial.html#cb141-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract column p</span></span>
<span id="cb141-17"><a href="vegan-tutorial.html#cb141-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pull</span>(p) </span>
<span id="cb141-18"><a href="vegan-tutorial.html#cb141-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(p) <span class="sc">&lt;</span> <span class="dv">2</span>) <span class="fu">return</span>(<span class="dv">0</span>) <span class="co"># one or 0 species has an H of 0</span></span>
<span id="cb141-19"><a href="vegan-tutorial.html#cb141-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">exp</span>( <span class="sc">-</span><span class="fu">sum</span>(p <span class="sc">*</span> <span class="fu">log</span>(p)) ) <span class="co"># exponential of shannon index</span></span>
<span id="cb141-20"><a href="vegan-tutorial.html#cb141-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb141-21"><a href="vegan-tutorial.html#cb141-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-22"><a href="vegan-tutorial.html#cb141-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the shannon diversity</span></span>
<span id="cb141-23"><a href="vegan-tutorial.html#cb141-23" aria-hidden="true" tabindex="-1"></a><span class="fu">shannon_diversity</span>(LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], <span class="co"># Species names, A : E</span></span>
<span id="cb141-24"><a href="vegan-tutorial.html#cb141-24" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">5</span>, <span class="dv">30</span>, <span class="dv">22</span>, <span class="dv">140</span>)) <span class="co"># Species counts</span></span>
<span id="cb141-25"><a href="vegan-tutorial.html#cb141-25" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 3.367463</span></span></code></pre></div>
<p>This function should work well with a grouped summarize function:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="vegan-tutorial.html#cb142-1" aria-hidden="true" tabindex="-1"></a>tidy_ant_data <span class="sc">%&gt;%</span> </span>
<span id="cb142-2"><a href="vegan-tutorial.html#cb142-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Acre, Habitat) <span class="sc">%&gt;%</span> <span class="co"># group by Acre &amp; habitat</span></span>
<span id="cb142-3"><a href="vegan-tutorial.html#cb142-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">shannon =</span> <span class="fu">shannon_diversity</span>(Species, N)) <span class="sc">%&gt;%</span> </span>
<span id="cb142-4"><a href="vegan-tutorial.html#cb142-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span>
<span id="cb142-5"><a href="vegan-tutorial.html#cb142-5" aria-hidden="true" tabindex="-1"></a><span class="do">## `summarise()` has grouped output by &#39;Acre&#39;. You can override using the `.groups` argument.</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
Acre
</th>
<th style="text-align:left;">
Habitat
</th>
<th style="text-align:right;">
shannon
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
P
</td>
<td style="text-align:right;">
3.205639
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
P
</td>
<td style="text-align:right;">
3.485273
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Q
</td>
<td style="text-align:right;">
3.552628
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
P
</td>
<td style="text-align:right;">
2.924111
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
P
</td>
<td style="text-align:right;">
1.894624
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
P
</td>
<td style="text-align:right;">
1.825931
</td>
</tr>
<tr>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
P
</td>
<td style="text-align:right;">
3.726142
</td>
</tr>
<tr>
<td style="text-align:right;">
19
</td>
<td style="text-align:left;">
P
</td>
<td style="text-align:right;">
2.769997
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
P
</td>
<td style="text-align:right;">
2.017839
</td>
</tr>
<tr>
<td style="text-align:right;">
34
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
3.359807
</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-analysis-tutorial.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tidyr-tutorial.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Christopher-Peterson/Bio373L-Book/edit/master/chapters/analysis/r_vegan.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/Christopher-Peterson/Bio373L-Book/blob/master/chapters/analysis/r_vegan.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
