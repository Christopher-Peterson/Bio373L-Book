<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>F Community ecology analyses with vegan | Bio 373L Survival Guide</title>
  <meta name="description" content="Writing advice for Field Ecology." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="F Community ecology analyses with vegan | Bio 373L Survival Guide" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Writing advice for Field Ecology." />
  <meta name="github-repo" content="Christopher-Peterson/Bio373L-Book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="F Community ecology analyses with vegan | Bio 373L Survival Guide" />
  
  <meta name="twitter:description" content="Writing advice for Field Ecology." />
  

<meta name="author" content="Christopher R. Peterson" />


<meta name="date" content="2021-02-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="tidyr-tutorial.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Bio 373L Survival Guide</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="structure.html"><a href="structure.html"><i class="fa fa-check"></i><b>1</b> Writing Lab Reports: Structure</a><ul>
<li class="chapter" data-level="1.1" data-path="structure.html"><a href="structure.html#structure-overview"><i class="fa fa-check"></i><b>1.1</b> Structure Overview</a></li>
<li class="chapter" data-level="1.2" data-path="structure.html"><a href="structure.html#abstract"><i class="fa fa-check"></i><b>1.2</b> Abstract</a></li>
<li class="chapter" data-level="1.3" data-path="structure.html"><a href="structure.html#introduction"><i class="fa fa-check"></i><b>1.3</b> Introduction</a></li>
<li class="chapter" data-level="1.4" data-path="structure.html"><a href="structure.html#methods"><i class="fa fa-check"></i><b>1.4</b> Methods</a></li>
<li class="chapter" data-level="1.5" data-path="structure.html"><a href="structure.html#results"><i class="fa fa-check"></i><b>1.5</b> Results</a><ul>
<li class="chapter" data-level="1.5.1" data-path="structure.html"><a href="structure.html#reporting-statistics"><i class="fa fa-check"></i><b>1.5.1</b> Reporting statistics</a></li>
<li class="chapter" data-level="1.5.2" data-path="structure.html"><a href="structure.html#do-not-interpret-your-data-here"><i class="fa fa-check"></i><b>1.5.2</b> Do not interpret your data here</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="structure.html"><a href="structure.html#discussion"><i class="fa fa-check"></i><b>1.6</b> Discussion</a></li>
<li class="chapter" data-level="1.7" data-path="structure.html"><a href="structure.html#literature-cited"><i class="fa fa-check"></i><b>1.7</b> Literature Cited</a></li>
<li class="chapter" data-level="1.8" data-path="structure.html"><a href="structure.html#common-mistakes-for-particular-sections"><i class="fa fa-check"></i><b>1.8</b> Common Mistakes for particular sections</a><ul>
<li class="chapter" data-level="1.8.1" data-path="structure.html"><a href="structure.html#introduction-and-discussion"><i class="fa fa-check"></i><b>1.8.1</b> Introduction and Discussion</a></li>
<li class="chapter" data-level="1.8.2" data-path="structure.html"><a href="structure.html#results-1"><i class="fa fa-check"></i><b>1.8.2</b> Results</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="style.html"><a href="style.html"><i class="fa fa-check"></i><b>2</b> Writing Lab Reports: Style</a><ul>
<li class="chapter" data-level="2.1" data-path="style.html"><a href="style.html#be-concise"><i class="fa fa-check"></i><b>2.1</b> Be Concise</a></li>
<li class="chapter" data-level="2.2" data-path="style.html"><a href="style.html#sentence-structure"><i class="fa fa-check"></i><b>2.2</b> Sentence Structure</a></li>
<li class="chapter" data-level="2.3" data-path="style.html"><a href="style.html#passive-voice"><i class="fa fa-check"></i><b>2.3</b> Passive Voice</a></li>
<li class="chapter" data-level="2.4" data-path="style.html"><a href="style.html#word-choice"><i class="fa fa-check"></i><b>2.4</b> Word Choice</a></li>
<li class="chapter" data-level="2.5" data-path="style.html"><a href="style.html#scientific-and-common-names"><i class="fa fa-check"></i><b>2.5</b> Scientific and Common Names</a></li>
<li class="chapter" data-level="2.6" data-path="style.html"><a href="style.html#other-grammar"><i class="fa fa-check"></i><b>2.6</b> Other Grammar</a></li>
<li class="chapter" data-level="2.7" data-path="style.html"><a href="style.html#commonly-confused-definitions"><i class="fa fa-check"></i><b>2.7</b> Commonly Confused Definitions</a></li>
<li class="chapter" data-level="2.8" data-path="style.html"><a href="style.html#significant-digits"><i class="fa fa-check"></i><b>2.8</b> Significant Digits</a></li>
<li class="chapter" data-level="2.9" data-path="style.html"><a href="style.html#tenses"><i class="fa fa-check"></i><b>2.9</b> Tenses</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="figures.html"><a href="figures.html"><i class="fa fa-check"></i><b>3</b> Figures and Tables</a><ul>
<li class="chapter" data-level="3.1" data-path="figures.html"><a href="figures.html#captions"><i class="fa fa-check"></i><b>3.1</b> Captions</a></li>
<li class="chapter" data-level="3.2" data-path="figures.html"><a href="figures.html#figures"><i class="fa fa-check"></i><b>3.2</b> Figures</a><ul>
<li class="chapter" data-level="3.2.1" data-path="figures.html"><a href="figures.html#specific-figure-guidelines"><i class="fa fa-check"></i><b>3.2.1</b> Specific Figure Guidelines</a></li>
<li class="chapter" data-level="3.2.2" data-path="figures.html"><a href="figures.html#be-concise-1"><i class="fa fa-check"></i><b>3.2.2</b> Be Concise</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="figures.html"><a href="figures.html#some-example-figures"><i class="fa fa-check"></i><b>3.3</b> Some Example Figures</a><ul>
<li class="chapter" data-level="3.3.1" data-path="figures.html"><a href="figures.html#general-formatting"><i class="fa fa-check"></i><b>3.3.1</b> General Formatting</a></li>
<li class="chapter" data-level="3.3.2" data-path="figures.html"><a href="figures.html#continuous-response-categorical-predictors"><i class="fa fa-check"></i><b>3.3.2</b> Continuous response, categorical predictors</a></li>
<li class="chapter" data-level="3.3.3" data-path="figures.html"><a href="figures.html#categorical-count-or-frequency-responses"><i class="fa fa-check"></i><b>3.3.3</b> Categorical, count, or frequency responses</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="figures.html"><a href="figures.html#tables"><i class="fa fa-check"></i><b>3.4</b> Tables</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="lab1.html"><a href="lab1.html"><i class="fa fa-check"></i><b>4</b> Lab 1: Succession</a><ul>
<li class="chapter" data-level="4.1" data-path="lab1.html"><a href="lab1.html#introduction-to-the-lab"><i class="fa fa-check"></i><b>4.1</b> Introduction to the lab</a></li>
<li class="chapter" data-level="4.2" data-path="lab1.html"><a href="lab1.html#materials-and-methods"><i class="fa fa-check"></i><b>4.2</b> Materials and Methods</a><ul>
<li class="chapter" data-level="4.2.1" data-path="lab1.html"><a href="lab1.html#bfl-habitat-regions"><i class="fa fa-check"></i><b>4.2.1</b> BFL habitat regions</a></li>
<li class="chapter" data-level="4.2.2" data-path="lab1.html"><a href="lab1.html#data-collection"><i class="fa fa-check"></i><b>4.2.2</b> Data Collection</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="lab1.html"><a href="lab1.html#analysis-to-perform"><i class="fa fa-check"></i><b>4.3</b> Analysis to perform</a><ul>
<li class="chapter" data-level="4.3.1" data-path="lab1.html"><a href="lab1.html#canopy-tree-density"><i class="fa fa-check"></i><b>4.3.1</b> Canopy tree density</a></li>
<li class="chapter" data-level="4.3.2" data-path="lab1.html"><a href="lab1.html#species-by-habitat-and-life-stage"><i class="fa fa-check"></i><b>4.3.2</b> Species by habitat and life stage</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="lab1.html"><a href="lab1.html#discussion-1"><i class="fa fa-check"></i><b>4.4</b> Discussion</a></li>
<li class="chapter" data-level="4.5" data-path="lab1.html"><a href="lab1.html#general-comments-post-review"><i class="fa fa-check"></i><b>4.5</b> General Comments (Post-Review)</a><ul>
<li class="chapter" data-level="4.5.1" data-path="lab1.html"><a href="lab1.html#figures-1"><i class="fa fa-check"></i><b>4.5.1</b> Figures</a></li>
<li class="chapter" data-level="4.5.2" data-path="lab1.html"><a href="lab1.html#write-this-like-youre-trying-to-publish-it"><i class="fa fa-check"></i><b>4.5.2</b> Write this like you're trying to publish it</a></li>
<li class="chapter" data-level="4.5.3" data-path="lab1.html"><a href="lab1.html#describe-the-habitats"><i class="fa fa-check"></i><b>4.5.3</b> Describe the habitats</a></li>
<li class="chapter" data-level="4.5.4" data-path="lab1.html"><a href="lab1.html#the-analysis"><i class="fa fa-check"></i><b>4.5.4</b> The Analysis</a></li>
<li class="chapter" data-level="4.5.5" data-path="lab1.html"><a href="lab1.html#keeping-things-in-the-right-sections"><i class="fa fa-check"></i><b>4.5.5</b> Keeping things in the right sections</a></li>
<li class="chapter" data-level="4.5.6" data-path="lab1.html"><a href="lab1.html#basic-style-and-format-rules"><i class="fa fa-check"></i><b>4.5.6</b> Basic style and format rules</a></li>
<li class="chapter" data-level="4.5.7" data-path="lab1.html"><a href="lab1.html#other-comments"><i class="fa fa-check"></i><b>4.5.7</b> Other Comments</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="Lab2.html"><a href="Lab2.html"><i class="fa fa-check"></i><b>5</b> Lab 2: Woodland Heterogeneity</a><ul>
<li class="chapter" data-level="5.1" data-path="Lab2.html"><a href="Lab2.html#introduction-background"><i class="fa fa-check"></i><b>5.1</b> Introduction &amp; background</a></li>
<li class="chapter" data-level="5.2" data-path="Lab2.html"><a href="Lab2.html#questions-and-hypotheses"><i class="fa fa-check"></i><b>5.2</b> Questions and Hypotheses</a></li>
<li class="chapter" data-level="5.3" data-path="Lab2.html"><a href="Lab2.html#field-methods"><i class="fa fa-check"></i><b>5.3</b> Field Methods</a></li>
<li class="chapter" data-level="5.4" data-path="Lab2.html"><a href="Lab2.html#analyses"><i class="fa fa-check"></i><b>5.4</b> Analyses</a><ul>
<li class="chapter" data-level="5.4.1" data-path="Lab2.html"><a href="Lab2.html#calibrating-canopy-estimates"><i class="fa fa-check"></i><b>5.4.1</b> Calibrating canopy estimates</a></li>
<li class="chapter" data-level="5.4.2" data-path="Lab2.html"><a href="Lab2.html#relationship-between-canopy-and-ground-cover"><i class="fa fa-check"></i><b>5.4.2</b> Relationship between canopy and ground cover</a></li>
<li class="chapter" data-level="5.4.3" data-path="Lab2.html"><a href="Lab2.html#quantifying-the-spatial-mosaic"><i class="fa fa-check"></i><b>5.4.3</b> Quantifying the spatial mosaic</a></li>
<li class="chapter" data-level="5.4.4" data-path="Lab2.html"><a href="Lab2.html#historical-trends"><i class="fa fa-check"></i><b>5.4.4</b> Historical Trends</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="Lab-MRR.html"><a href="Lab-MRR.html"><i class="fa fa-check"></i><b>6</b> Lab 3: Mark-Release-Recapture with <em>Heliconius</em></a><ul>
<li class="chapter" data-level="6.1" data-path="Lab-MRR.html"><a href="Lab-MRR.html#introduction-1"><i class="fa fa-check"></i><b>6.1</b> Introduction</a><ul>
<li class="chapter" data-level="6.1.1" data-path="Lab-MRR.html"><a href="Lab-MRR.html#the-lincoln-pearson-model"><i class="fa fa-check"></i><b>6.1.1</b> The Lincoln-Pearson model</a></li>
<li class="chapter" data-level="6.1.2" data-path="Lab-MRR.html"><a href="Lab-MRR.html#heliconius-butterflies"><i class="fa fa-check"></i><b>6.1.2</b> <em>Heliconius</em> butterflies</a></li>
<li class="chapter" data-level="6.1.3" data-path="Lab-MRR.html"><a href="Lab-MRR.html#hardy-weinberg-equilbrium"><i class="fa fa-check"></i><b>6.1.3</b> Hardy-Weinberg Equilbrium</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="Lab-MRR.html"><a href="Lab-MRR.html#questions-and-hypotheses-1"><i class="fa fa-check"></i><b>6.2</b> Questions and hypotheses</a></li>
<li class="chapter" data-level="6.3" data-path="Lab-MRR.html"><a href="Lab-MRR.html#analysis"><i class="fa fa-check"></i><b>6.3</b> Analysis</a><ul>
<li class="chapter" data-level="6.3.1" data-path="Lab-MRR.html"><a href="Lab-MRR.html#effect-of-sampling-intensity-on-lincoln-pearson-hatn-estimates"><i class="fa fa-check"></i><b>6.3.1</b> Effect of sampling intensity on Lincoln-Pearson <span class="math inline">\(\hat{N}\)</span> estimates</a></li>
<li class="chapter" data-level="6.3.2" data-path="Lab-MRR.html"><a href="Lab-MRR.html#sex-ratios"><i class="fa fa-check"></i><b>6.3.2</b> Sex ratios</a></li>
<li class="chapter" data-level="6.3.3" data-path="Lab-MRR.html"><a href="Lab-MRR.html#comparison-of-lincoln-pearson-with-alternative-method"><i class="fa fa-check"></i><b>6.3.3</b> Comparison of Lincoln-Pearson with alternative method</a></li>
<li class="chapter" data-level="6.3.4" data-path="Lab-MRR.html"><a href="Lab-MRR.html#hardy-weinberg"><i class="fa fa-check"></i><b>6.3.4</b> Hardy-Weinberg</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="Lab-MRR.html"><a href="Lab-MRR.html#discussion-2"><i class="fa fa-check"></i><b>6.4</b> Discussion</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="Lab3.html"><a href="Lab3.html"><i class="fa fa-check"></i><b>7</b> Lab 3: Ant Community Ecology</a><ul>
<li class="chapter" data-level="7.1" data-path="Lab3.html"><a href="Lab3.html#background"><i class="fa fa-check"></i><b>7.1</b> Background</a></li>
<li class="chapter" data-level="7.2" data-path="Lab3.html"><a href="Lab3.html#questions-and-hypotheses-2"><i class="fa fa-check"></i><b>7.2</b> Questions and hypotheses</a></li>
<li class="chapter" data-level="7.3" data-path="Lab3.html"><a href="Lab3.html#methods-1"><i class="fa fa-check"></i><b>7.3</b> Methods</a><ul>
<li class="chapter" data-level="7.3.1" data-path="Lab3.html"><a href="Lab3.html#bait-survey"><i class="fa fa-check"></i><b>7.3.1</b> Bait Survey</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="Lab3.html"><a href="Lab3.html#analysis-1"><i class="fa fa-check"></i><b>7.4</b> Analysis</a><ul>
<li class="chapter" data-level="7.4.1" data-path="Lab3.html"><a href="Lab3.html#s.-invicta-habitat-preference"><i class="fa fa-check"></i><b>7.4.1</b> <em>S. invicta</em> habitat preference</a></li>
<li class="chapter" data-level="7.4.2" data-path="Lab3.html"><a href="Lab3.html#ant-community-differences"><i class="fa fa-check"></i><b>7.4.2</b> Ant community differences</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="Lab-phorid.html"><a href="Lab-phorid.html"><i class="fa fa-check"></i><b>8</b> Lab 4: Parasitoid impacts on host foraging behavior: Phorid flies and fire ants</a><ul>
<li class="chapter" data-level="8.1" data-path="Lab-phorid.html"><a href="Lab-phorid.html#background-1"><i class="fa fa-check"></i><b>8.1</b> Background</a><ul>
<li class="chapter" data-level="8.1.1" data-path="Lab-phorid.html"><a href="Lab-phorid.html#fire-ants-and-phorid-flies"><i class="fa fa-check"></i><b>8.1.1</b> Fire ants and phorid flies</a></li>
<li class="chapter" data-level="8.1.2" data-path="Lab-phorid.html"><a href="Lab-phorid.html#fire-ants-natural-history"><i class="fa fa-check"></i><b>8.1.2</b> Fire ants natural history</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="Lab-phorid.html"><a href="Lab-phorid.html#objectives"><i class="fa fa-check"></i><b>8.2</b> Objectives</a></li>
<li class="chapter" data-level="8.3" data-path="Lab-phorid.html"><a href="Lab-phorid.html#methods-2"><i class="fa fa-check"></i><b>8.3</b> Methods</a><ul>
<li class="chapter" data-level="8.3.1" data-path="Lab-phorid.html"><a href="Lab-phorid.html#phorid-impact-on-fire-ant-foraging"><i class="fa fa-check"></i><b>8.3.1</b> Phorid impact on fire ant foraging</a></li>
<li class="chapter" data-level="8.3.2" data-path="Lab-phorid.html"><a href="Lab-phorid.html#using-the-hobo-mx2303-data-logger"><i class="fa fa-check"></i><b>8.3.2</b> Using the HOBO MX2303 data logger</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="Lab-phorid.html"><a href="Lab-phorid.html#analysis-2"><i class="fa fa-check"></i><b>8.4</b> Analysis</a><ul>
<li class="chapter" data-level="8.4.1" data-path="Lab-phorid.html"><a href="Lab-phorid.html#effect-of-phorids-on-ant-foraging"><i class="fa fa-check"></i><b>8.4.1</b> Effect of phorids on ant foraging</a></li>
<li class="chapter" data-level="8.4.2" data-path="Lab-phorid.html"><a href="Lab-phorid.html#effects-of-environmental-conditions"><i class="fa fa-check"></i><b>8.4.2</b> Effects of environmental conditions</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="Lab-phorid.html"><a href="Lab-phorid.html#discussion-3"><i class="fa fa-check"></i><b>8.5</b> Discussion</a></li>
<li class="chapter" data-level="8.6" data-path="Lab-phorid.html"><a href="Lab-phorid.html#some-questions-from-previou-semesters"><i class="fa fa-check"></i><b>8.6</b> Some questions from previou semesters:</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="working-with-r.html"><a href="working-with-r.html"><i class="fa fa-check"></i><b>A</b> Working with R</a><ul>
<li class="chapter" data-level="A.1" data-path="working-with-r.html"><a href="working-with-r.html#introduction-to-rstudio"><i class="fa fa-check"></i><b>A.1</b> Introduction to RStudio</a><ul>
<li class="chapter" data-level="A.1.1" data-path="working-with-r.html"><a href="working-with-r.html#rstudio-projects"><i class="fa fa-check"></i><b>A.1.1</b> RStudio Projects</a></li>
<li class="chapter" data-level="A.1.2" data-path="working-with-r.html"><a href="working-with-r.html#customizing-rstudio"><i class="fa fa-check"></i><b>A.1.2</b> Customizing RStudio</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="working-with-r.html"><a href="working-with-r.html#r-basics"><i class="fa fa-check"></i><b>A.2</b> R basics</a><ul>
<li class="chapter" data-level="A.2.1" data-path="working-with-r.html"><a href="working-with-r.html#statements-vectors"><i class="fa fa-check"></i><b>A.2.1</b> Statements &amp; vectors</a></li>
<li class="chapter" data-level="A.2.2" data-path="working-with-r.html"><a href="working-with-r.html#variables"><i class="fa fa-check"></i><b>A.2.2</b> Variables</a></li>
<li class="chapter" data-level="A.2.3" data-path="working-with-r.html"><a href="working-with-r.html#reading-working-with-data-frames"><i class="fa fa-check"></i><b>A.2.3</b> Reading &amp; working with data frames</a></li>
<li class="chapter" data-level="A.2.4" data-path="working-with-r.html"><a href="working-with-r.html#functions"><i class="fa fa-check"></i><b>A.2.4</b> Functions</a></li>
<li class="chapter" data-level="A.2.5" data-path="working-with-r.html"><a href="working-with-r.html#getting-help"><i class="fa fa-check"></i><b>A.2.5</b> Getting Help</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="B" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html"><i class="fa fa-check"></i><b>B</b> Making graphs in R with <code>ggplot2</code></a><ul>
<li class="chapter" data-level="B.1" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#components-of-a-plot"><i class="fa fa-check"></i><b>B.1</b> Components of a plot</a></li>
<li class="chapter" data-level="B.2" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#aesthetics-and-scales"><i class="fa fa-check"></i><b>B.2</b> Aesthetics and scales</a><ul>
<li class="chapter" data-level="B.2.1" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#color"><i class="fa fa-check"></i><b>B.2.1</b> Color</a></li>
<li class="chapter" data-level="B.2.2" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#shape"><i class="fa fa-check"></i><b>B.2.2</b> Shape</a></li>
<li class="chapter" data-level="B.2.3" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#size"><i class="fa fa-check"></i><b>B.2.3</b> Size</a></li>
<li class="chapter" data-level="B.2.4" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#fixed-aesthetics"><i class="fa fa-check"></i><b>B.2.4</b> Fixed aesthetics</a></li>
<li class="chapter" data-level="B.2.5" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#combining-aesthetics"><i class="fa fa-check"></i><b>B.2.5</b> Combining aesthetics</a></li>
</ul></li>
<li class="chapter" data-level="B.3" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#geometry"><i class="fa fa-check"></i><b>B.3</b> Geometry</a><ul>
<li class="chapter" data-level="B.3.1" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#continuous-x-no-y"><i class="fa fa-check"></i><b>B.3.1</b> Continuous X, no Y</a></li>
<li class="chapter" data-level="B.3.2" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#ggp_discx_conty"><i class="fa fa-check"></i><b>B.3.2</b> Discrete X, continuous Y</a></li>
<li class="chapter" data-level="B.3.3" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#continuous-x-and-y"><i class="fa fa-check"></i><b>B.3.3</b> Continuous X and Y</a></li>
<li class="chapter" data-level="B.3.4" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#time-series-data"><i class="fa fa-check"></i><b>B.3.4</b> Time series data</a></li>
<li class="chapter" data-level="B.3.5" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#discrete-x-and-y"><i class="fa fa-check"></i><b>B.3.5</b> Discrete X and Y</a></li>
</ul></li>
<li class="chapter" data-level="B.4" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#facets"><i class="fa fa-check"></i><b>B.4</b> Facets</a></li>
<li class="chapter" data-level="B.5" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#changing-the-theme-axis-titles-other-visual-elements"><i class="fa fa-check"></i><b>B.5</b> Changing the theme, axis titles, &amp; other visual elements</a></li>
<li class="chapter" data-level="B.6" data-path="ggplot-tutorial.html"><a href="ggplot-tutorial.html#more-references"><i class="fa fa-check"></i><b>B.6</b> More references</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="dplyr-tutorial.html"><a href="dplyr-tutorial.html"><i class="fa fa-check"></i><b>C</b> Data manipulation with <code>dplyr</code></a><ul>
<li class="chapter" data-level="C.1" data-path="dplyr-tutorial.html"><a href="dplyr-tutorial.html#the-pipe"><i class="fa fa-check"></i><b>C.1</b> The Pipe (%&gt;%)</a></li>
<li class="chapter" data-level="C.2" data-path="dplyr-tutorial.html"><a href="dplyr-tutorial.html#addingmodifying-columns-mutate"><i class="fa fa-check"></i><b>C.2</b> Adding/modifying columns (mutate)</a></li>
<li class="chapter" data-level="C.3" data-path="dplyr-tutorial.html"><a href="dplyr-tutorial.html#subsetting-by-row-filter"><i class="fa fa-check"></i><b>C.3</b> Subsetting by row (filter)</a></li>
<li class="chapter" data-level="C.4" data-path="dplyr-tutorial.html"><a href="dplyr-tutorial.html#subsetting-by-column-select"><i class="fa fa-check"></i><b>C.4</b> Subsetting by column (select)</a></li>
<li class="chapter" data-level="C.5" data-path="dplyr-tutorial.html"><a href="dplyr-tutorial.html#sorting-by-columns-arrange"><i class="fa fa-check"></i><b>C.5</b> Sorting by columns (arrange)</a></li>
<li class="chapter" data-level="C.6" data-path="dplyr-tutorial.html"><a href="dplyr-tutorial.html#summarizing-data"><i class="fa fa-check"></i><b>C.6</b> Summarizing data</a></li>
<li class="chapter" data-level="C.7" data-path="dplyr-tutorial.html"><a href="dplyr-tutorial.html#group-operations"><i class="fa fa-check"></i><b>C.7</b> Group Operations</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="r-analysis-tutorial.html"><a href="r-analysis-tutorial.html"><i class="fa fa-check"></i><b>D</b> Performing some useful analyses in R</a><ul>
<li class="chapter" data-level="D.1" data-path="r-analysis-tutorial.html"><a href="r-analysis-tutorial.html#a-note-on-factors"><i class="fa fa-check"></i><b>D.1</b> A note on factors</a></li>
<li class="chapter" data-level="D.2" data-path="r-analysis-tutorial.html"><a href="r-analysis-tutorial.html#comparing-categorical-frequencies-contingency-tables-related-analyses"><i class="fa fa-check"></i><b>D.2</b> Comparing categorical frequencies (Contingency Tables &amp; related analyses)</a><ul>
<li class="chapter" data-level="D.2.1" data-path="r-analysis-tutorial.html"><a href="r-analysis-tutorial.html#contingency-tables"><i class="fa fa-check"></i><b>D.2.1</b> Contingency Tables</a></li>
<li class="chapter" data-level="D.2.2" data-path="r-analysis-tutorial.html"><a href="r-analysis-tutorial.html#chi-squared-fishers-exact-tests"><i class="fa fa-check"></i><b>D.2.2</b> Chi-squared &amp; Fisher's Exact Tests</a></li>
</ul></li>
<li class="chapter" data-level="D.3" data-path="r-analysis-tutorial.html"><a href="r-analysis-tutorial.html#linear-models-regression-and-anova"><i class="fa fa-check"></i><b>D.3</b> Linear Models: Regression and ANOVA</a><ul>
<li class="chapter" data-level="D.3.1" data-path="r-analysis-tutorial.html"><a href="r-analysis-tutorial.html#regression"><i class="fa fa-check"></i><b>D.3.1</b> Regression</a></li>
<li class="chapter" data-level="D.3.2" data-path="r-analysis-tutorial.html"><a href="r-analysis-tutorial.html#anova"><i class="fa fa-check"></i><b>D.3.2</b> ANOVA</a></li>
</ul></li>
<li class="chapter" data-level="D.4" data-path="r-analysis-tutorial.html"><a href="r-analysis-tutorial.html#to-do-in-progress"><i class="fa fa-check"></i><b>D.4</b> To do (In progress)</a><ul>
<li class="chapter" data-level="D.4.1" data-path="r-analysis-tutorial.html"><a href="r-analysis-tutorial.html#comparing-two-means-t-tests"><i class="fa fa-check"></i><b>D.4.1</b> Comparing two means (t-tests)</a></li>
<li class="chapter" data-level="D.4.2" data-path="r-analysis-tutorial.html"><a href="r-analysis-tutorial.html#advanced-workflow-tips"><i class="fa fa-check"></i><b>D.4.2</b> Advanced workflow tips</a></li>
<li class="chapter" data-level="D.4.3" data-path="r-analysis-tutorial.html"><a href="r-analysis-tutorial.html#model-comparisons"><i class="fa fa-check"></i><b>D.4.3</b> Model comparisons</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="E" data-path="tidyr-tutorial.html"><a href="tidyr-tutorial.html"><i class="fa fa-check"></i><b>E</b> Wrangling, reshaping, and tidying data with <code>tidyr</code></a><ul>
<li class="chapter" data-level="E.1" data-path="tidyr-tutorial.html"><a href="tidyr-tutorial.html#tidy-data"><i class="fa fa-check"></i><b>E.1</b> Tidy data</a></li>
<li class="chapter" data-level="E.2" data-path="tidyr-tutorial.html"><a href="tidyr-tutorial.html#pivot-longer-tutorial"><i class="fa fa-check"></i><b>E.2</b> Going from many columns to many rows: <code>pivot_longer()</code></a></li>
<li class="chapter" data-level="E.3" data-path="tidyr-tutorial.html"><a href="tidyr-tutorial.html#separate-tutorial"><i class="fa fa-check"></i><b>E.3</b> Splitting and merging columns: <code>separate() and unite()</code></a></li>
<li class="chapter" data-level="E.4" data-path="tidyr-tutorial.html"><a href="tidyr-tutorial.html#pivot-longer-multi-tutorial"><i class="fa fa-check"></i><b>E.4</b> Pivoting multiple columns</a><ul>
<li class="chapter" data-level="E.4.1" data-path="tidyr-tutorial.html"><a href="tidyr-tutorial.html#combining-pivot_longer-with-summarise"><i class="fa fa-check"></i><b>E.4.1</b> Combining <code>pivot_longer()</code> with <code>summarise()</code></a></li>
</ul></li>
<li class="chapter" data-level="E.5" data-path="tidyr-tutorial.html"><a href="tidyr-tutorial.html#pivot-wider-tutorial"><i class="fa fa-check"></i><b>E.5</b> Going from many rows to many columns: <code>pivot_wider()</code></a></li>
<li class="chapter" data-level="E.6" data-path="tidyr-tutorial.html"><a href="tidyr-tutorial.html#combining-data-frames-in-progress"><i class="fa fa-check"></i><b>E.6</b> Combining data frames (In Progress)</a><ul>
<li class="chapter" data-level="E.6.1" data-path="tidyr-tutorial.html"><a href="tidyr-tutorial.html#binding-rows"><i class="fa fa-check"></i><b>E.6.1</b> Binding rows</a></li>
<li class="chapter" data-level="E.6.2" data-path="tidyr-tutorial.html"><a href="tidyr-tutorial.html#binding-columns-by-position"><i class="fa fa-check"></i><b>E.6.2</b> Binding columns by position</a></li>
<li class="chapter" data-level="E.6.3" data-path="tidyr-tutorial.html"><a href="tidyr-tutorial.html#joining-rows-by-value"><i class="fa fa-check"></i><b>E.6.3</b> Joining rows by value</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="F" data-path="vegan-tutorial.html"><a href="vegan-tutorial.html"><i class="fa fa-check"></i><b>F</b> Community ecology analyses with <code>vegan</code></a><ul>
<li class="chapter" data-level="F.1" data-path="vegan-tutorial.html"><a href="vegan-tutorial.html#setting-up-the-data"><i class="fa fa-check"></i><b>F.1</b> Setting up the data</a></li>
<li class="chapter" data-level="F.2" data-path="vegan-tutorial.html"><a href="vegan-tutorial.html#jaccard-similarity"><i class="fa fa-check"></i><b>F.2</b> Jaccard similarity</a></li>
<li class="chapter" data-level="F.3" data-path="vegan-tutorial.html"><a href="vegan-tutorial.html#species-accumulation-curves"><i class="fa fa-check"></i><b>F.3</b> Species Accumulation Curves</a></li>
<li class="chapter" data-level="F.4" data-path="vegan-tutorial.html"><a href="vegan-tutorial.html#rank-abundance-curves"><i class="fa fa-check"></i><b>F.4</b> Rank Abundance Curves</a></li>
<li class="chapter" data-level="F.5" data-path="vegan-tutorial.html"><a href="vegan-tutorial.html#shannon-index-diversity"><i class="fa fa-check"></i><b>F.5</b> Shannon Index &amp; Diversity</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Bio 373L Survival Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="vegan-tutorial" class="section level1">
<h1><span class="header-section-number">F</span> Community ecology analyses with <code>vegan</code></h1>
<p>This appendix is a companion to the ant community ecology lab. If you haven't already, please install the <code>vegan</code> package with <code>install.packages(&quot;vegan&quot;)</code> and put the <a href="https://github.com/Christopher-Peterson/Bio373L-Book/tree/master/example_data">ant_data_F18.csv</a> file in your <code>example_data</code> directory.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load packages &amp; data</span>
<span class="kw">library</span>(tidyverse) 
<span class="co"># install.packages(&quot;vegan&quot;) # uncomment if necessary</span>
<span class="kw">library</span>(vegan) 
<span class="kw">library</span>(cowplot)
<span class="kw">theme_set</span>(<span class="kw">theme_cowplot</span>())</code></pre></div>
<div id="setting-up-the-data" class="section level2">
<h2><span class="header-section-number">F.1</span> Setting up the data</h2>
<p>Read in the new dataset.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wide_ant_data =<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;example_data/ant_data_F19.csv&quot;</span>) 
<span class="kw">View</span>(wide_ant_data)</code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Habitat
</th>
<th style="text-align:right;">
Site
</th>
<th style="text-align:right;">
Canopy_cover
</th>
<th style="text-align:right;">
Ground_cover
</th>
<th style="text-align:left;">
Nearest_canopy_spp
</th>
<th style="text-align:left;">
Disturbance
</th>
<th style="text-align:right;">
Drought
</th>
<th style="text-align:right;">
Phorids
</th>
<th style="text-align:left;">
Notes
</th>
<th style="text-align:right;">
GPS_Easting
</th>
<th style="text-align:right;">
GPS_Northing
</th>
<th style="text-align:left;">
name
</th>
<th style="text-align:right;">
Acre
</th>
<th style="text-align:right;">
Total_ants
</th>
<th style="text-align:right;">
S_invicta_present
</th>
<th style="text-align:right;">
Solenopsis_invicta
</th>
<th style="text-align:right;">
Pheidole_floridana
</th>
<th style="text-align:right;">
Pheidole_tetra
</th>
<th style="text-align:right;">
Solenopsis_texana
</th>
<th style="text-align:right;">
Camponotus_texanus
</th>
<th style="text-align:right;">
Aphenogaster_texana
</th>
<th style="text-align:right;">
Brachymyermex
</th>
<th style="text-align:right;">
Crematogaster_laeviuscula
</th>
<th style="text-align:right;">
Forelius_mccooki
</th>
<th style="text-align:right;">
Forelius_pruinosis
</th>
<th style="text-align:right;">
Monomorium_minimum
</th>
<th style="text-align:right;">
Odontomachus_clarus
</th>
<th style="text-align:right;">
Paratrechina_terricola
</th>
<th style="text-align:right;">
Pheidole_bicarinata
</th>
<th style="text-align:right;">
Pheidole_dentata
</th>
<th style="text-align:right;">
Pheidole_lamia
</th>
<th style="text-align:right;">
Pheidole_metallescens
</th>
<th style="text-align:right;">
Pheidole_pelor
</th>
<th style="text-align:right;">
Pheilode_hyati
</th>
<th style="text-align:right;">
Pseudomyrmex_brunneus
</th>
<th style="text-align:right;">
Solenopsis_geminata
</th>
<th style="text-align:right;">
Atta_texana
</th>
<th style="text-align:right;">
Camponotus_sansabeaneus
</th>
<th style="text-align:right;">
Pachycondyla_harpax
</th>
<th style="text-align:right;">
Other_species
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
American Elm
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
105
</td>
<td style="text-align:right;">
815
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
250
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
250
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
yellow jackets
</td>
<td style="text-align:right;">
96
</td>
<td style="text-align:right;">
826
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
hackberry
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
yellow jackets
</td>
<td style="text-align:right;">
86
</td>
<td style="text-align:right;">
848
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
yellow jackets
</td>
<td style="text-align:right;">
76
</td>
<td style="text-align:right;">
848
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
low
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
87
</td>
<td style="text-align:right;">
862
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
62
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
62
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
104
</td>
<td style="text-align:right;">
842
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
109
</td>
<td style="text-align:right;">
836
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
175
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
175
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
hackberry
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
97
</td>
<td style="text-align:right;">
858
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
350
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
350
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
hackberry
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
flies
</td>
<td style="text-align:right;">
107
</td>
<td style="text-align:right;">
859
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
108
</td>
<td style="text-align:right;">
877
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
200
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
200
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
</div>
<p>Looking at the dataset, there's a bunch of columns that indicate the number of species present. Let's make a tidy version of this dataset, which will be easier to work with for some of the functions we're using. We'll be using the <code>pivot_longer()</code> function from the <code>tidyr</code> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tidy_ant_data =<span class="st"> </span>wide_ant_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> Solenopsis_invicta<span class="op">:</span>Other_species, <span class="co"># These are the species columns</span>
               <span class="dt">names_to =</span> <span class="st">&quot;Species&quot;</span>, <span class="co"># Put the column name in a &quot;Species&quot; column</span>
               <span class="dt">values_to =</span> <span class="st">&quot;N&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Cell values are counts, so make that an N column</span>
<span class="st">  </span><span class="co"># replace the underscores in species names with a space:</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Species =</span> <span class="kw">str_replace</span>(Species, <span class="st">&quot;_&quot;</span>, <span class="st">&quot; &quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># str_replace is in the stringr package, which is part of tidyverse</span>
<span class="st">  </span><span class="kw">filter</span>(N <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="co"># Remove species that aren&#39;t present</span>
<span class="kw">View</span>(tidy_ant_data)</code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Habitat
</th>
<th style="text-align:right;">
Site
</th>
<th style="text-align:right;">
Canopy_cover
</th>
<th style="text-align:right;">
Ground_cover
</th>
<th style="text-align:left;">
Nearest_canopy_spp
</th>
<th style="text-align:left;">
Disturbance
</th>
<th style="text-align:right;">
Drought
</th>
<th style="text-align:right;">
Phorids
</th>
<th style="text-align:left;">
Notes
</th>
<th style="text-align:right;">
GPS_Easting
</th>
<th style="text-align:right;">
GPS_Northing
</th>
<th style="text-align:left;">
name
</th>
<th style="text-align:right;">
Acre
</th>
<th style="text-align:right;">
Total_ants
</th>
<th style="text-align:right;">
S_invicta_present
</th>
<th style="text-align:left;">
Species
</th>
<th style="text-align:right;">
N
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
American Elm
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
105
</td>
<td style="text-align:right;">
815
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
250
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Solenopsis invicta
</td>
<td style="text-align:right;">
250
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
yellow jackets
</td>
<td style="text-align:right;">
96
</td>
<td style="text-align:right;">
826
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
Pheidole floridana
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
hackberry
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
yellow jackets
</td>
<td style="text-align:right;">
86
</td>
<td style="text-align:right;">
848
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
Pheidole tetra
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
yellow jackets
</td>
<td style="text-align:right;">
76
</td>
<td style="text-align:right;">
848
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
Pheidole tetra
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
low
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
87
</td>
<td style="text-align:right;">
862
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
62
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Solenopsis invicta
</td>
<td style="text-align:right;">
62
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
104
</td>
<td style="text-align:right;">
842
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
Pheidole tetra
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
104
</td>
<td style="text-align:right;">
842
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
Solenopsis texana
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
pecan
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
109
</td>
<td style="text-align:right;">
836
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
175
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Solenopsis invicta
</td>
<td style="text-align:right;">
175
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
hackberry
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
97
</td>
<td style="text-align:right;">
858
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
350
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Solenopsis invicta
</td>
<td style="text-align:right;">
350
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
hackberry
</td>
<td style="text-align:left;">
high
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
flies
</td>
<td style="text-align:right;">
107
</td>
<td style="text-align:right;">
859
</td>
<td style="text-align:left;">
student_1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
Pheidole floridana
</td>
<td style="text-align:right;">
30
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="jaccard-similarity" class="section level2">
<h2><span class="header-section-number">F.2</span> Jaccard similarity</h2>
<p>To calculate the Jaccard similarity of two communities, you need to divide the number of shared species by the total number of species. This can be done with a combination of the <code>intersect()</code>, <code>union()</code>, and <code>length()</code> functions.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Let&#39;s say these are the species in our two communities:</span>
com_a =<span class="st"> </span>LETTERS[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]
com_b =<span class="st"> </span>LETTERS[<span class="dv">3</span><span class="op">:</span><span class="dv">8</span>]
<span class="kw">print</span>(com_a); <span class="kw">print</span>(com_b)
## [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;E&quot;
## [1] &quot;C&quot; &quot;D&quot; &quot;E&quot; &quot;F&quot; &quot;G&quot; &quot;H&quot;

<span class="co"># Species in common:</span>
<span class="kw">intersect</span>(com_a, com_b)
## [1] &quot;C&quot; &quot;D&quot; &quot;E&quot;

<span class="co"># Species present in either:</span>
<span class="kw">union</span>(com_a, com_b)
## [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;E&quot; &quot;F&quot; &quot;G&quot; &quot;H&quot;

<span class="co"># Total number of species present:</span>
<span class="kw">length</span>(<span class="kw">union</span>(com_a, com_b))
## [1] 8

<span class="co"># Jaccard similarity:</span>
<span class="kw">length</span>(<span class="kw">intersect</span>(com_a, com_b)) <span class="op">/</span><span class="st"> </span>
<span class="kw">length</span>(<span class="kw">union</span>(com_a, com_b))
## [1] 0.375</code></pre></div>
<p>Since you'll be doing this for several groups, it's a good idea to write a function that will do this for us.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
jaccard_similarity =<span class="st"> </span><span class="cf">function</span>(com_<span class="dv">1</span>, com_<span class="dv">2</span>) {
  <span class="co"># com_1 and com_2 are the arguments of the function, </span>
  <span class="co"># they should be the names in different communities</span>
  
  <span class="co"># Create local variables for the intersection and union;</span>
  common_spp =<span class="st"> </span><span class="kw">intersect</span>(com_<span class="dv">1</span>, com_<span class="dv">2</span>) 
  total_spp =<span class="st"> </span><span class="kw">union</span>(com_<span class="dv">1</span>, com_<span class="dv">2</span>) 
  <span class="co"># these variables are created while the function runs &amp; destroyed when it ends</span>
  <span class="co"># The last value of the function is its output (a.k.a., return value)</span>
  <span class="kw">length</span>(common_spp) <span class="op">/</span><span class="st"> </span><span class="kw">length</span>(total_spp) <span class="co"># return this</span>
}

<span class="kw">jaccard_similarity</span>(<span class="dt">com_1 =</span> com_a, <span class="dt">com_2 =</span> com_b)
## [1] 0.375</code></pre></div>
<p>How would we make this work with the dataset? Here's one possibility:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Define the community comparison as disturbed river terrace vs undisturbed river terrace</span>

com_r_lo =<span class="st"> </span>tidy_ant_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="co"># Subset the data to get the &quot;community&quot; you want</span>
<span class="st">  </span><span class="kw">filter</span>(Habitat <span class="op">==</span><span class="st"> &quot;R&quot;</span>, Disturbance <span class="op">==</span><span class="st"> &quot;low&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="co"># Get the list of species as a vector</span>
<span class="st">  </span><span class="kw">pull</span>(Species) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unique</span>()
com_r_hi =<span class="st"> </span>tidy_ant_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(Habitat <span class="op">==</span><span class="st"> &quot;R&quot;</span>, Disturbance <span class="op">==</span><span class="st"> &quot;high&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">pull</span>(Species) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unique</span>()
com_r_lo
## [1] &quot;Solenopsis invicta&quot; &quot;Pheidole floridana&quot; &quot;Pheidole tetra&quot;    
## [4] &quot;Pheidole pelor&quot;     &quot;Pheidole dentata&quot;   &quot;Other species&quot;

com_r_hi
## [1] &quot;Solenopsis invicta&quot;  &quot;Pheidole floridana&quot;  &quot;Pheidole tetra&quot;     
## [4] &quot;Solenopsis texana&quot;   &quot;Camponotus texanus&quot;  &quot;Pheidole dentata&quot;   
## [7] &quot;Pheidole bicarinata&quot; &quot;Other species&quot;

<span class="kw">jaccard_similarity</span>(com_r_lo, com_r_hi)
## [1] 0.5555556</code></pre></div>
<p>There are more elegant &amp; efficient ways to do this, but they rely on some R techniques we haven't talked about yet; I'll be updating this chapter once I get the appropriate information into the book.</p>
</div>
<div id="species-accumulation-curves" class="section level2">
<h2><span class="header-section-number">F.3</span> Species Accumulation Curves</h2>
<p>Species accumulation curves are calculated by the <code>specaccum()</code> function in <code>vegan</code>. This function requires a data set where each column is a species, each_row is a site, and each cell is a 1 (indicating presence) or 0 (indicating absence). Let's create a function that will format the data for this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create a function that converts a number to presence-absense</span>
to_presence_absense =<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">if_else</span>(x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>)

<span class="co"># Format data for the species accumulation curve</span>
format_sac_data =<span class="st"> </span><span class="cf">function</span>(wide_data) {
    wide_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">      </span><span class="co"># Select only species columns</span>
<span class="st">      </span><span class="kw">select</span>(Solenopsis_invicta<span class="op">:</span>Other_species) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">      </span><span class="co"># We don&#39;t want to include this &quot;other species&quot;</span>
<span class="st">      </span><span class="kw">select</span>(<span class="op">-</span>Other_species) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">      </span><span class="co"># use to_presence_absense() on all columns</span>
<span class="st">      </span><span class="kw">mutate</span>(<span class="kw">across</span>(<span class="kw">everything</span>(), to_presence_absense))
}

<span class="co"># Test it on quarry data:</span>
wide_ant_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(Habitat <span class="op">==</span><span class="st"> &quot;Q&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">format_sac_data</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">View</span>()</code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
Solenopsis_invicta
</th>
<th style="text-align:right;">
Pheidole_floridana
</th>
<th style="text-align:right;">
Pheidole_tetra
</th>
<th style="text-align:right;">
Solenopsis_texana
</th>
<th style="text-align:right;">
Camponotus_texanus
</th>
<th style="text-align:right;">
Aphenogaster_texana
</th>
<th style="text-align:right;">
Brachymyermex
</th>
<th style="text-align:right;">
Crematogaster_laeviuscula
</th>
<th style="text-align:right;">
Forelius_mccooki
</th>
<th style="text-align:right;">
Forelius_pruinosis
</th>
<th style="text-align:right;">
Monomorium_minimum
</th>
<th style="text-align:right;">
Odontomachus_clarus
</th>
<th style="text-align:right;">
Paratrechina_terricola
</th>
<th style="text-align:right;">
Pheidole_bicarinata
</th>
<th style="text-align:right;">
Pheidole_dentata
</th>
<th style="text-align:right;">
Pheidole_lamia
</th>
<th style="text-align:right;">
Pheidole_metallescens
</th>
<th style="text-align:right;">
Pheidole_pelor
</th>
<th style="text-align:right;">
Pheilode_hyati
</th>
<th style="text-align:right;">
Pseudomyrmex_brunneus
</th>
<th style="text-align:right;">
Solenopsis_geminata
</th>
<th style="text-align:right;">
Atta_texana
</th>
<th style="text-align:right;">
Camponotus_sansabeaneus
</th>
<th style="text-align:right;">
Pachycondyla_harpax
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
</div>
<p>From here, you can</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sac_r =<span class="st"> </span>wide_ant_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(Habitat <span class="op">==</span><span class="st"> &quot;R&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">format_sac_data</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">specaccum</span>(<span class="dt">method =</span> <span class="st">&quot;random&quot;</span>, <span class="dt">permutations =</span> <span class="dv">500</span>)   <span class="co"># Use these argument options</span></code></pre></div>
<p>Use <code>print(sac_r)</code> to look at the output. The results are basically a tidy data frame turned on its side: one row for the number of sites sampled, one for the estimated richness, and one for the error around the richness estimate. To plot this, we need to re-format the output.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sac_r_tidy =<span class="st"> </span>
<span class="st">  </span><span class="kw">tibble</span>(
    <span class="dt">sites =</span> sac_r<span class="op">$</span>sites,
    <span class="dt">richness =</span> sac_r<span class="op">$</span>richness,
    <span class="dt">se =</span> sac_r<span class="op">$</span>sd <span class="co"># the &quot;SD&quot; column is actually a standard error measure</span>
  ) 
<span class="kw">View</span>(sac_r_tidy)</code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
sites
</th>
<th style="text-align:right;">
richness
</th>
<th style="text-align:right;">
se
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.950
</td>
<td style="text-align:right;">
0.3517776
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.710
</td>
<td style="text-align:right;">
0.5643909
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2.328
</td>
<td style="text-align:right;">
0.7466800
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2.800
</td>
<td style="text-align:right;">
0.8817909
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
3.200
</td>
<td style="text-align:right;">
0.9411544
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
3.536
</td>
<td style="text-align:right;">
0.9872453
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
3.842
</td>
<td style="text-align:right;">
0.9975099
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
4.108
</td>
<td style="text-align:right;">
1.0170569
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
4.336
</td>
<td style="text-align:right;">
1.0065437
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
4.584
</td>
<td style="text-align:right;">
1.0024739
</td>
</tr>
</tbody>
</table>
</div>
<p>From this, it's relatively simple to create the actual plot:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sac_r_plot =<span class="st"> </span>sac_r_tidy <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="co"># Define the confidence intervals based on mean richness &amp; standard errors</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">lower_ci =</span> richness <span class="op">-</span><span class="st"> </span>se <span class="op">*</span><span class="st"> </span><span class="fl">1.96</span>,
         <span class="dt">upper_ci =</span> richness <span class="op">+</span><span class="st"> </span>se <span class="op">*</span><span class="st"> </span><span class="fl">1.96</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">aes</span>(<span class="dt">x =</span> sites, <span class="dt">y =</span> richness) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span><span class="st"> </span><span class="co"># line for richness</span>
<span class="st">  </span><span class="co"># The lines below add in confidence intervals</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> lower_ci), <span class="dt">linetype =</span> <span class="dv">2</span>, <span class="dt">alpha =</span> .<span class="dv">7</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> upper_ci), <span class="dt">linetype =</span> <span class="dv">2</span>, <span class="dt">alpha =</span> .<span class="dv">7</span>) <span class="op">+</span>
<span class="st">  </span><span class="co"># alpha adds a bit of transparency</span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Sampling intensity (number of sites)&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Number of ant species&quot;</span>)
sac_r_plot</code></pre></div>
<p><img src="Bio373L-Book_files/figure-html/a6_sac_plot1-1.png" width="672" /> Let's combine these last few steps into a pair of functions, for re-use with different data sub-sets:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">get_sac =<span class="st"> </span><span class="cf">function</span>(wide_data) {
  <span class="co"># wide_data is data in the wide format, probably subset or filtered</span>
  sac =<span class="st"> </span><span class="kw">format_sac_data</span>(wide_data) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Convert to SAC format</span>
<span class="st">    </span><span class="kw">specaccum</span>(<span class="dt">method =</span> <span class="st">&quot;random&quot;</span>, <span class="dt">permutations =</span> <span class="dv">500</span>) <span class="co"># calculate SAC</span>
  <span class="kw">tibble</span>( <span class="co"># Tidy output</span>
    <span class="dt">sites =</span> sac<span class="op">$</span>sites,
    <span class="dt">richness =</span> sac<span class="op">$</span>richness,
    <span class="dt">se =</span> sac<span class="op">$</span>sd
  ) <span class="op">%&gt;%</span><span class="st">   </span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">lower_ci =</span> richness <span class="op">-</span><span class="st"> </span>se <span class="op">*</span><span class="st"> </span><span class="fl">1.96</span>,
           <span class="dt">upper_ci =</span> richness <span class="op">+</span><span class="st"> </span>se <span class="op">*</span><span class="st"> </span><span class="fl">1.96</span>)
}
plot_sac =<span class="st"> </span><span class="cf">function</span>(sac_data) {
  <span class="co"># sac_data is the output of get_sac()</span>
  sac_data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">aes</span>(<span class="dt">x =</span> sites, <span class="dt">y =</span> richness) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span><span class="st"> </span><span class="co"># line for richness</span>
<span class="st">    </span><span class="co"># The lines below add in confidence intervals</span>
<span class="st">    </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> lower_ci), <span class="dt">linetype =</span> <span class="dv">2</span>, <span class="dt">alpha =</span> .<span class="dv">7</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> upper_ci), <span class="dt">linetype =</span> <span class="dv">2</span>, <span class="dt">alpha =</span> .<span class="dv">7</span>) <span class="op">+</span>
<span class="st">    </span><span class="co"># alpha adds a bit of transparency</span>
<span class="st">    </span><span class="kw">xlab</span>(<span class="st">&quot;Sampling intensity (number of sites)&quot;</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">ylab</span>(<span class="st">&quot;Number of ant species&quot;</span>)
}</code></pre></div>
<p>From here, we easily try different combinations</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wide_ant_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(Habitat <span class="op">==</span><span class="st"> &quot;P&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">get_sac</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">plot_sac</span>()</code></pre></div>
<p><img src="Bio373L-Book_files/figure-html/a6_sac_expt1-1.png" width="672" /></p>
<p>When comparing multiple groups, it's best to put them together in a single plot. The easiest way to do that is to calculate the SAC data, then combine the resulting data frames</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create the SAC data frames for each group in your comparison</span>
sac_dist_hi =<span class="st"> </span>wide_ant_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">filter</span>(Disturbance <span class="op">==</span><span class="st"> &quot;high&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">get_sac</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Disturbance =</span> <span class="st">&quot;high&quot;</span>) <span class="co"># Use the Mutate Add disturbance column to sac results</span>
sac_dist_low =<span class="st"> </span>wide_ant_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">filter</span>(Disturbance <span class="op">==</span><span class="st"> &quot;low&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">get_sac</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Disturbance =</span> <span class="st">&quot;low&quot;</span>) <span class="co"># Add disturbance column back to sac results</span>

sac_dist_combined =<span class="st"> </span><span class="co"># Combine them into one data frame</span>
<span class="st">  </span><span class="kw">bind_rows</span>(sac_dist_hi, sac_dist_low) <span class="co"># Note that bind_rows() can combine more than two data frames, if you&#39;re doing a 3+ part comparison</span>

<span class="kw">plot_sac</span>(sac_dist_combined) <span class="op">+</span><span class="st"> </span><span class="co"># Creates a standard SAC Plot</span>
<span class="st">  </span><span class="kw">aes</span>(<span class="dt">color=</span>Disturbance) <span class="op">+</span><span class="st">    </span><span class="co"># Separates out the lines by color based on the Disturbance column</span>
<span class="st">  </span><span class="kw">scale_color_viridis_d</span>()     <span class="co"># Make the colors look nice</span></code></pre></div>
<p><img src="Bio373L-Book_files/figure-html/a6_sac_expt2-1.png" width="672" /></p>
</div>
<div id="rank-abundance-curves" class="section level2">
<h2><span class="header-section-number">F.4</span> Rank Abundance Curves</h2>
<p>This is really just an exercise in data manipulation: we want to get the total number of individuals of each species, then display them in decreasing frequency. You need to summarize your data frame so that there's one row per species, with columns Species and N (which is the species-level sum of the already existing N column in <code>tidy_ant_data</code>). I'm not providing the code for this; you should be able to piece it together from the dplyr and/or ggplot appendices. I would recommend creating a function that does the work, so that you can reuse it.</p>
<p>To make the plot itself, you can use this function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
plot_rank_abundance =<span class="st"> </span><span class="cf">function</span>(summarized_data, <span class="dt">right_margin =</span> <span class="fl">2.8</span>) {
  <span class="co"># Make the rank abundance plot</span>
  <span class="co"># The right_margin argument is used to make sure that </span>
  <span class="co"># the angled axis labels don&#39;t go of the page</span>
  <span class="co"># make it larger or smaller to suit your tastes</span>
  <span class="kw">ggplot</span>(summarized_data, <span class="kw">aes</span>(<span class="dt">x =</span> Species, <span class="dt">y =</span> N)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_line</span>(<span class="dt">group =</span> <span class="dv">1</span>) <span class="op">+</span><span class="st"> </span><span class="co"># Create a descending line</span>
<span class="st">    </span><span class="kw">scale_y_log10</span>() <span class="op">+</span><span class="st"> </span><span class="co"># puts y axis on log scale</span>
<span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="co"># cleans up appearance of x axis labels</span>
            <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="op">-</span><span class="dv">20</span>, <span class="dt">hjust =</span> <span class="fl">0.05</span>, <span class="co"># angled, justified text</span>
                         <span class="dt">vjust =</span> <span class="dv">1</span>, <span class="dt">face =</span> <span class="st">&quot;italic&quot;</span>), <span class="co"># also in italics</span>
          <span class="co"># makes sure that the axis labels don&#39;t go off the page</span>
          <span class="dt">plot.margin =</span> <span class="kw">unit</span>(<span class="kw">c</span>(<span class="dv">0</span>,right_margin,<span class="dv">0</span>,<span class="dv">0</span>)<span class="op">+</span>.<span class="dv">1</span>, <span class="st">&quot;cm&quot;</span>))
  <span class="co"># Be sure sure that Species has been coded as a factor, in decreasing order of N!</span>
}</code></pre></div>
<p>Your resulting plot should look something like this:</p>
<p><img src="Bio373L-Book_files/figure-html/a6_plot_rank_abund_hidden-1.png" width="672" /></p>
</div>
<div id="shannon-index-diversity" class="section level2">
<h2><span class="header-section-number">F.5</span> Shannon Index &amp; Diversity</h2>
<p>Let's make a function that calculates the Shannon index of a community:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
shannon_diversity =<span class="st"> </span><span class="cf">function</span>(species, count) {
  <span class="co"># species: vector of species names; </span>
  <span class="co"># count: how many of each species are present</span>
  
  <span class="co"># Create p, a vector of relative frequencies</span>
  p =<span class="st"> </span><span class="kw">tibble</span>(species, count) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="co"># Merge duplicate species </span>
<span class="st">    </span><span class="kw">group_by</span>(species) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">summarize</span>(<span class="dt">count =</span> <span class="kw">sum</span>(count)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="co"># Remove zeroes</span>
<span class="st">    </span><span class="kw">filter</span>(count <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="co"># Convert to frequencies</span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">p =</span> count <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(count)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="co"># Extract column p</span>
<span class="st">    </span><span class="kw">pull</span>(p) 
  <span class="cf">if</span>(<span class="kw">length</span>(p) <span class="op">&lt;</span><span class="st"> </span><span class="dv">2</span>) <span class="kw">return</span>(<span class="dv">0</span>) <span class="co"># one or 0 species has an H of 0</span>
  <span class="kw">exp</span>( <span class="op">-</span><span class="kw">sum</span>(p <span class="op">*</span><span class="st"> </span><span class="kw">log</span>(p)) ) <span class="co"># exponential of shannon index</span>
}

<span class="co"># Calculate the shannon diversity</span>
<span class="kw">shannon_diversity</span>(LETTERS[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>], <span class="co"># Species names, A : E</span>
                 <span class="kw">c</span>(<span class="dv">100</span>, <span class="dv">5</span>, <span class="dv">30</span>, <span class="dv">22</span>, <span class="dv">140</span>)) <span class="co"># Species counts</span>
## [1] 3.367463</code></pre></div>
<p>This function should work well with a grouped summarize function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tidy_ant_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(Acre, Habitat) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># group by Acre &amp; habitat</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">shannon =</span> <span class="kw">shannon_diversity</span>(Species, N)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">View</span>()
## `summarise()` has grouped output by &#39;Acre&#39;. You can override using the `.groups` argument.</code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
Acre
</th>
<th style="text-align:left;">
Habitat
</th>
<th style="text-align:right;">
shannon
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
P
</td>
<td style="text-align:right;">
3.205639
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
P
</td>
<td style="text-align:right;">
3.485273
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Q
</td>
<td style="text-align:right;">
3.552628
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
P
</td>
<td style="text-align:right;">
2.924111
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
P
</td>
<td style="text-align:right;">
1.894624
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
P
</td>
<td style="text-align:right;">
1.825931
</td>
</tr>
<tr>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
P
</td>
<td style="text-align:right;">
3.726142
</td>
</tr>
<tr>
<td style="text-align:right;">
19
</td>
<td style="text-align:left;">
P
</td>
<td style="text-align:right;">
2.769997
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
P
</td>
<td style="text-align:right;">
2.017839
</td>
</tr>
<tr>
<td style="text-align:right;">
34
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
3.359807
</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="tidyr-tutorial.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
